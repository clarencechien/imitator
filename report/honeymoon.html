<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>德瑞行程 Infographic 與詳細手冊</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            background-color: #f1f5f9;
        }
        .infographic-card {
            background-color: white;
            border-radius: 1.5rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.05), 0 4px 6px -4px rgb(0 0 0 / 0.05);
            border: 1px solid #e2e8f0;
        }
        .itinerary-day-card {
            border: 1px solid #e2e8f0;
            border-radius: 1rem;
            background-color: #ffffff;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        .itinerary-header-a { background-color: #dcfce7; color: #166534; }
        .itinerary-header-b { background-color: #f3f4f6; color: #374151; }
        .itinerary-header-c { background-color: #e0e7ff; color: #3730a3; }
        .itinerary-header-d { background-color: #ffedd5; color: #9a3412; }
        .itinerary-header-e { background-color: #e0f2fe; color: #0369a1; }
        .leaflet-popup-content-wrapper {
            border-radius: 8px;
        }
        .legend {
            padding: 6px 8px;
            font: 14px/16px Arial, Helvetica, sans-serif;
            background: white;
            background: rgba(255,255,255,0.8);
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
            border-radius: 5px;
        }
        .legend i {
            width: 18px;
            height: 4px;
            float: left;
            margin-right: 8px;
            margin-top: 6px;
            opacity: 0.9;
        }
        .legend .dashed {
            border-top: 4px dashed;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-screen-2xl">
        <!-- Header -->
        <header class="text-center mb-12">
            <h1 class="text-3xl md:text-5xl font-bold text-gray-900 leading-tight">德瑞行程全攻略 Infographic</h1>
            <p class="mt-4 text-lg md:text-xl text-gray-600">五大旅行社方案視覺化比較與最佳選擇</p>
        </header>

        <!-- Main Comparison Table -->
        <section class="mb-12 infographic-card p-6 md:p-8">
            <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">五大行程方案 Infographic 總覽</h2>
            <div class="overflow-x-auto">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="p-3 font-bold uppercase text-gray-600 border-b-2 border-gray-200">特點比較</th>
                            <th class="p-3 font-bold uppercase text-green-700 border-b-2 border-green-200 text-center">行程A<br>誠真15日</th>
                            <th class="p-3 font-bold uppercase text-blue-700 border-b-2 border-blue-200 text-center">行程C<br>晴天15日</th>
                            <th class="p-3 font-bold uppercase text-orange-700 border-b-2 border-orange-200 text-center">行程D<br>雋品14日</th>
                            <th class="p-3 font-bold uppercase text-cyan-700 border-b-2 border-cyan-200 text-center">行程E<br>心憶13日</th>
                            <th class="p-3 font-bold uppercase text-gray-600 border-b-2 border-gray-200 text-center">行程B<br>誠真14日</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="hover:bg-gray-50">
                            <td class="p-3 border-b border-gray-200 font-semibold">✈️ 飛行體驗</td>
                            <td class="p-3 border-b border-gray-200 text-center">長榮直飛<br><span class="text-sm text-green-600">✓ 最舒適</span></td>
                            <td class="p-3 border-b border-gray-200 text-center">長榮直飛<br><span class="text-sm text-green-600">✓ 最舒適</span></td>
                            <td class="p-3 border-b border-gray-200 text-center">長榮直飛<br><span class="text-sm text-green-600">✓ 最舒適</span></td>
                            <td class="p-3 border-b border-gray-200 text-center">華航直飛<br><span class="text-sm text-green-600">✓ 最舒適</span></td>
                            <td class="p-3 border-b border-gray-200 text-center">阿聯酋轉機<br><span class="text-sm text-red-600">✗ 最勞累</span></td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="p-3 border-b border-gray-200 font-semibold">🏔️ 核心景點</td>
                            <td class="p-3 border-b border-gray-200 text-center">雙峰經典<br><span class="text-xs">(少女峰/馬特洪峰)</span></td>
                            <td class="p-3 border-b border-gray-200 text-center">三峰全覽<br><span class="text-xs">(+白朗峰)</span></td>
                            <td class="p-3 border-b border-gray-200 text-center">三峰精華<br><span class="text-xs">(+白朗峰)</span></td>
                            <td class="p-3 border-b border-gray-200 text-center">雙峰+特色<br><span class="text-xs">(+皮拉圖斯山)</span></td>
                            <td class="p-3 border-b border-gray-200 text-center">雙峰經典<br><span class="text-xs">(少女峰/馬特洪峰)</span></td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="p-3 border-b border-gray-200 font-semibold">🚶‍♂️ 旅遊節奏</td>
                            <td class="p-3 border-b border-gray-200 text-center">最從容<br><span class="text-xs">慕尼黑連泊2晚</span></td>
                            <td class="p-3 border-b border-gray-200 text-center">節奏較快<br><span class="text-xs">慕尼黑住1晚</span></td>
                            <td class="p-3 border-b border-gray-200 text-center">最精實<br><span class="text-xs">慕尼黑住1晚</span></td>
                            <td class="p-3 border-b border-gray-200 text-center">非常緊湊<br><span class="text-xs">13天/法蘭克福來回</span></td>
                            <td class="p-3 border-b border-gray-200 text-center">節奏緊湊<br><span class="text-xs">慕尼黑住1晚</span></td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="p-3 border-b border-gray-200 font-semibold">💡 適合對象</td>
                            <td class="p-3 border-b border-gray-200 text-center text-sm">追求極致舒適，想深度體驗德瑞法經典路線的旅客。</td>
                            <td class="p-3 border-b border-gray-200 text-center text-sm">體力佳的山景愛好者，想一次集滿三大名峰，且不介意結尾行程較快。</td>
                            <td class="p-3 border-b border-gray-200 text-center text-sm">時間有限的山景愛好者，想在最短天數內集滿三峰，行程最精實。</td>
                            <td class="p-3 border-b border-gray-200 text-center text-sm">時間極為有限，但想一次走遍德瑞法精華，且不介意長途拉車的旅客。</td>
                            <td class="p-3 border-b border-gray-200 text-center text-sm">預算考量或特定日期選擇下的備案。</td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="p-3 font-semibold">⭐ 綜合推薦</td>
                            <td class="p-3 text-center font-bold text-lg text-green-600">★★★★★</td>
                            <td class="p-3 text-center font-bold text-lg text-blue-600">★★★★☆</td>
                            <td class="p-3 text-center font-bold text-lg text-orange-600">★★★★</td>
                            <td class="p-3 text-center font-bold text-lg text-cyan-600">★★★☆☆</td>
                            <td class="p-3 text-center font-bold text-lg text-gray-500">★★☆☆☆</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Recommendation Section -->
        <section class="mb-12 infographic-card p-6 md:p-8">
            <div class="flex flex-col md:flex-row items-center gap-6">
                <div class="flex-shrink-0">
                    <div class="bg-green-100 text-green-600 rounded-full p-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    </div>
                </div>
                <div>
                    <h2 class="text-2xl font-bold text-green-800 mb-2">最終推薦分析</h2>
                    <p class="text-gray-700 text-base md:text-lg">
                        ● <strong class="text-green-700">追求舒適與經典平衡：首選 `行程A (誠真15日)`</strong><br>
                        它的「直飛航班」與「慕尼黑連泊2晚」組合，為熟齡旅客提供了無可取代的舒適度與從容感。雖然只看雙峰，但行程涵蓋了德瑞法的精華，且結尾步調最悠閒，是體驗最均衡、最無負擔的選擇。
                        <br><br>
                        ● <strong class="text-blue-700">熱愛壯麗山景，想一次攻頂：選擇 `行程C (晴天15日)` 或 `行程D (雋品14日)`</strong><br>
                        這兩個行程都加入了<strong>白朗峰</strong>，是為登山與自然景觀愛好者設計的。兩者皆為直飛，舒適度有保障。<strong>行程C (15天)</strong> 時間稍長一天，行程相對從容一些；<strong>行程D (14天)</strong> 在更短的時間內完成三峰之旅，行程最為精實，適合時間有限但體力充沛的旅客。
                    </p>
                </div>
            </div>
        </section>

        <!-- Map Section -->
        <section class="mb-12 infographic-card p-6 md:p-8">
            <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">互動式路線地圖</h2>
            <p class="text-center text-gray-600 mb-4">點擊圖例可切換顯示不同行程路線，點擊地圖上的圖釘可查看景點簡介。</p>
            <div id="map" class="w-full h-[500px] md:h-[600px] rounded-lg z-0"></div>
        </section>

        <!-- Detailed Itinerary Section -->
        <section>
            <header class="text-center mb-12">
                <h2 class="text-3xl md:text-5xl font-bold text-gray-900 leading-tight">超詳細每日行程手冊</h2>
                <p class="mt-4 text-lg md:text-xl text-gray-600">每日路線、活動、食宿與貼心提醒</p>
            </header>
            
            <div class="space-y-8">
                <!-- Day 1-2 -->
                <div class="infographic-card p-6">
                    <h3 class="text-2xl font-bold mb-4 text-gray-800">Day 1-2: 啟程與抵達</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-5 gap-4">
                        <!-- Itinerary A -->
                        <div class="itinerary-day-card">
                            <div class="itinerary-header-a p-4"><h4 class="font-bold">行程A (誠真)</h4></div>
                            <div class="p-4 space-y-3 flex-grow flex flex-col">
                                <p>✈️ <strong>航班：</strong>長榮直飛慕尼黑(MUC)</p>
                                <p>🏨 <strong>首日住宿：</strong>羅騰堡</p>
                                <p>📍 <strong>首日行程：</strong>抵達後專車前往紐倫堡，觀光後入住羅騰堡。</p>
                                <div class="mt-auto pt-3 border-t border-gray-200">
                                    <p class="text-sm text-gray-600">💡 <strong>熟齡提醒：</strong>直飛航班體力消耗最小，抵達後雖直接走行程，但相對輕鬆。</p>
                                </div>
                            </div>
                        </div>
                        <!-- Itinerary C -->
                        <div class="itinerary-day-card">
                            <div class="itinerary-header-c p-4"><h4 class="font-bold">行程C (晴天)</h4></div>
                            <div class="p-4 space-y-3 flex-grow flex flex-col">
                                <p>✈️ <strong>航班：</strong>長榮直飛慕尼黑(MUC)</p>
                                <p>🏨 <strong>首日住宿：</strong>紐倫堡</p>
                                <p>📍 <strong>首日行程：</strong>抵達後搭乘ICE高鐵前往紐倫堡，直接入住飯店，節省拉車時間。</p>
                                <div class="mt-auto pt-3 border-t border-gray-200">
                                    <p class="text-sm text-gray-600">💡 <strong>熟齡提醒：</strong>搭乘高鐵取代巴士，舒適度高，且先到飯店安頓，節奏不錯。</p>
                                </div>
                            </div>
                        </div>
                        <!-- Itinerary D -->
                        <div class="itinerary-day-card">
                            <div class="itinerary-header-d p-4"><h4 class="font-bold">行程D (雋品)</h4></div>
                             <div class="p-4 space-y-3 flex-grow flex flex-col">
                                <p>✈️ <strong>航班：</strong>長榮直飛慕尼黑(MUC)</p>
                                <p>🏨 <strong>首日住宿：</strong>羅騰堡</p>
                                <p>📍 <strong>首日行程：</strong>與行程A相似，抵達後專車經紐倫堡，夜宿羅騰堡。</p>
                                <div class="mt-auto pt-3 border-t border-gray-200">
                                    <p class="text-sm text-gray-600">💡 <strong>熟齡提醒：</strong>同樣享有直飛優勢，開局輕鬆。</p>
                                </div>
                            </div>
                        </div>
                        <!-- Itinerary E -->
                        <div class="itinerary-day-card">
                            <div class="itinerary-header-e p-4"><h4 class="font-bold">行程E (心憶)</h4></div>
                             <div class="p-4 space-y-3 flex-grow flex flex-col">
                                <p>✈️ <strong>航班：</strong>華航直飛法蘭克福(FRA)</p>
                                <p>🏨 <strong>首日住宿：</strong>里屈埃維 (近柯瑪)</p>
                                <p>📍 <strong>首日行程：</strong>抵達後前往海德堡，再到法國亞爾薩斯小鎮住宿。</p>
                                <div class="mt-auto pt-3 border-t border-gray-200">
                                    <p class="text-sm text-gray-600">💡 <strong>熟齡提醒：</strong>雖然直飛，但首日拉車距離長，且直接跨國移動，節奏較快。</p>
                                </div>
                            </div>
                        </div>
                         <!-- Itinerary B -->
                        <div class="itinerary-day-card">
                            <div class="itinerary-header-b p-4"><h4 class="font-bold">行程B (誠真)</h4></div>
                             <div class="p-4 space-y-3 flex-grow flex flex-col">
                                <p>✈️ <strong>航班：</strong>阿聯酋轉機</p>
                                <p>🏨 <strong>首日住宿：</strong>羅騰堡</p>
                                <p>📍 <strong>首日行程：</strong>經長時間轉機抵達法蘭克福，再拉車至羅騰堡。</p>
                                <div class="mt-auto pt-3 border-t border-gray-200">
                                    <p class="text-sm text-red-600">💡 <strong>熟齡提醒：</strong>轉機非常勞累，不建議熟齡旅客選擇。</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mid-trip -->
                <div class="infographic-card p-6">
                    <h3 class="text-2xl font-bold mb-4 text-gray-800">Day 3 - 11: 旅程核心</h3>
                     <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h4 class="font-bold text-gray-800">德法童話小鎮 (所有行程)</h4>
                            <p class="text-sm mt-2">所有行程皆包含羅騰堡、海德堡、史特拉斯堡、柯瑪等經典小鎮，讓您沉浸在童話般的風景中。</p>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h4 class="font-bold text-gray-800">瑞士雙峰 (所有行程)</h4>
                            <p class="text-sm mt-2">少女峰與馬特洪峰是所有行程的共同亮點，皆安排連泊與景觀火車，確保舒適的登山體驗。</p>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-bold text-blue-800">白朗峰 (行程C, D)</h4>
                            <p class="text-sm mt-2">行程C與D的獨特之處在於增加了法國霞慕尼，讓您能一次探訪阿爾卑斯三大名峰。</p>
                        </div>
                        <div class="bg-cyan-50 p-4 rounded-lg">
                            <h4 class="font-bold text-cyan-800">特色山湖 (行程E)</h4>
                            <p class="text-sm mt-2">行程E則選擇了不同的山景體驗，加入了皮拉圖斯山與歐士能湖，景色同樣令人驚嘆。</p>
                        </div>
                     </div>
                </div>

                <!-- Final Days -->
                <div class="infographic-card p-6">
                    <h3 class="text-2xl font-bold mb-4 text-gray-800">旅程尾聲 & 返鄉</h3>
                     <div class="grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4">
                        <div class="itinerary-day-card">
                            <div class="itinerary-header-a p-4"><h4 class="font-bold">行程A (最從容)</h4></div>
                            <div class="p-4 text-sm">Day 12-15: 前往國王湖後，在慕尼黑<strong>連泊2晚</strong>，第13天擁有完整的市區觀光與自由活動時間，第15天清晨抵達台灣。</div>
                        </div>
                         <div class="itinerary-day-card">
                            <div class="itinerary-header-c p-4"><h4 class="font-bold">行程C (節奏快)</h4></div>
                            <div class="p-4 text-sm">Day 13-15: 國王湖後，在慕尼黑住宿1晚，隔日用完早餐便前往機場，第15天清晨抵達台灣。</div>
                        </div>
                        <div class="itinerary-day-card">
                            <div class="itinerary-header-d p-4"><h4 class="font-bold">行程D (最精實)</h4></div>
                            <div class="p-4 text-sm">Day 12-14: 國王湖後，在慕尼黑住宿1晚，隔日用完早餐便前往機場，第14天清晨抵達台灣。</div>
                        </div>
                        <div class="itinerary-day-card">
                            <div class="itinerary-header-e p-4"><h4 class="font-bold">行程E (最緊湊)</h4></div>
                            <div class="p-4 text-sm">Day 11-13: 從羅騰堡長途拉車返回法蘭克福住宿1晚，隔日上午班機，第13天清晨抵達台灣。</div>
                        </div>
                         <div class="itinerary-day-card">
                            <div class="itinerary-header-b p-4"><h4 class="font-bold">行程B (轉機)</h4></div>
                            <div class="p-4 text-sm">Day 12-14: 國王湖後，慕尼黑住宿1晚，隔日下午班機經杜拜轉機，第14天返抵國門。</div>
                        </div>
                    </div>
                </div>
                
                <!-- Package Inclusions -->
                <div class="infographic-card p-6">
                    <h3 class="text-2xl font-bold mb-4 text-gray-800">附加服務與贈品比較</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead>
                                <tr class="bg-gray-100">
                                    <th class="p-3 font-semibold">項目</th>
                                    <th class="p-3 font-semibold text-center">行程A (誠真)</th>
                                    <th class="p-3 font-semibold text-center">行程C (晴天)</th>
                                    <th class="p-3 font-semibold text-center">行程D (雋品)</th>
                                    <th class="p-3 font-semibold text-center">行程E (心憶)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b">
                                    <td class="p-3">領隊/司機小費</td>
                                    <td class="p-3 text-center text-green-600">✓ 包含</td>
                                    <td class="p-3 text-center text-green-600">✓ 包含</td>
                                    <td class="p-3 text-center text-green-600">✓ 包含</td>
                                    <td class="p-3 text-center text-green-600">✓ 包含</td>
                                </tr>
                                <tr class="border-b">
                                    <td class="p-3">導覽耳機</td>
                                    <td class="p-3 text-center text-green-600">✓ 提供</td>
                                    <td class="p-3 text-center text-green-600">✓ 提供</td>
                                    <td class="p-3 text-center text-green-600">✓ 提供</td>
                                    <td class="p-3 text-center text-green-600">✓ 提供</td>
                                </tr>
                                <tr class="border-b">
                                    <td class="p-3">每日礦泉水</td>
                                    <td class="p-3 text-center text-green-600">✓ 提供</td>
                                    <td class="p-3 text-center text-green-600">✓ 提供</td>
                                    <td class="p-3 text-center text-green-600">✓ 提供</td>
                                    <td class="p-3 text-center text-green-600">✓ 提供</td>
                                </tr>
                                <tr>
                                    <td class="p-3">歐洲上網卡</td>
                                    <td class="p-3 text-center text-green-600">✓ 每人一張SIM卡</td>
                                    <td class="p-3 text-center text-green-600">✓ 每人一張SIM卡</td>
                                    <td class="p-3 text-center text-green-600">✓ 兩人一台WIFI機</td>
                                    <td class="p-3 text-center text-green-600">✓ 兩人一台WIFI機或SIM卡</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var map = L.map('map').setView([47.5, 9.0], 6); // Centered on the Alps region

        L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 20
        }).addTo(map);

        const locations = {
            "慕尼黑": { lat: 48.1351, lng: 11.5820, desc: "巴伐利亞首府，德國第三大城，以啤酒節聞名。" },
            "紐倫堡": { lat: 49.4521, lng: 11.0767, desc: "神聖羅馬帝國的中心，充滿歷史感的玩具之都。" },
            "羅騰堡": { lat: 49.3777, lng: 10.1789, desc: "羅曼蒂克大道上的珍珠，保存最完整的中世紀古城。" },
            "海德堡": { lat: 49.3988, lng: 8.6724, desc: "德國最古老的大學城，擁有浪漫的古堡與老橋。" },
            "史特拉斯堡": { lat: 48.5734, lng: 7.7521, desc: "法國亞爾薩斯首府，融合德法風情的運河小鎮。" },
            "柯瑪": { lat: 48.0793, lng: 7.3582, desc: "《霍爾的移動城堡》靈感來源，色彩繽紛的童話小鎮。" },
            "伯恩": { lat: 46.9480, lng: 7.4474, desc: "瑞士首都，其舊城區被列為世界文化遺產。" },
            "格林德瓦": { lat: 46.6243, lng: 8.0336, desc: "艾格峰北麓最美山城，前往少女峰的門戶。" },
            "策馬特": { lat: 46.0207, lng: 7.7491, desc: "無車環保山城，欣賞馬特洪峰的絕佳地點。" },
            "蒙投": { lat: 46.4312, lng: 6.9104, desc: "日內瓦湖畔的音樂之都，以爵士音樂節聞名。" },
            "霞慕尼": { lat: 45.9237, lng: 6.8694, desc: "法國阿爾卑斯山腳下，攀登白朗峰的起點。" },
            "琉森": { lat: 47.0502, lng: 8.3093, desc: "瑞士的蜜月之鄉，擁有卡貝爾橋與美麗的琉森湖。" },
            "福森": { lat: 47.5682, lng: 10.7000, desc: "通往新天鵝堡的門戶，阿爾卑斯山腳下的可愛小鎮。" },
            "國王湖": { lat: 47.5889, lng: 12.9892, desc: "德國最清澈、最深的湖泊，景色如人間仙境。" },
            "法蘭克福": { lat: 50.1109, lng: 8.6821, desc: "德國的金融中心與交通樞紐。" },
            "里屈埃維": { lat: 48.1664, lng: 7.2982, desc: "亞爾薩斯酒鄉之路上，被譽為法國最美村莊之一。" },
            "施皮茨": { lat: 46.6880, lng: 7.6812, desc: "圖恩湖畔的美麗小鎮，擁有湖光山色的城堡景觀。" },
            "茲懷斯文": { lat: 46.4956, lng: 7.3751, desc: "搭乘黃金列車的重要轉乘站。" },
            "安德馬特": { lat: 46.6349, lng: 8.5950, desc: "位於阿爾卑斯山隘口，冰河列車路線上的重要小鎮。" },
            "茵特拉根": { lat: 46.6863, lng: 7.8632, desc: "少女峰地區的門戶，位於兩湖之間的渡假小鎮。" }
        };
        
        const loc = (name) => [locations[name].lat, locations[name].lng];

        // Define routes
        const routeA_bus = [loc("慕尼黑"), loc("紐倫堡"), loc("羅騰堡"), loc("海德堡"), loc("史特拉斯堡"), loc("柯瑪"), loc("伯恩"), loc("格林德瓦"), loc("茲懷斯文")];
        const routeA_train = [[loc("茲懷斯文"), loc("蒙投")], [loc("策馬特"), loc("安德馬特")]];
        const routeA_bus2 = [loc("蒙投"), loc("策馬特"), loc("安德馬特"), loc("琉森"), loc("福森"), loc("國王湖"), loc("慕尼黑")];

        const routeB_bus = [loc("法蘭克福"), loc("羅騰堡"), loc("海德堡"), loc("史特拉斯堡"), loc("柯瑪"), loc("伯恩"), loc("格林德瓦"), loc("茲懷斯文")];
        const routeB_train = [[loc("茲懷斯文"), loc("蒙投")], [loc("策馬特"), loc("安德馬特")]];
        const routeB_bus2 = [loc("蒙投"), loc("策馬特"), loc("安德馬特"), loc("琉森"), loc("福森"), loc("國王湖"), loc("慕尼黑")];

        const routeC_bus = [loc("紐倫堡"), loc("羅騰堡"), loc("海德堡"), loc("史特拉斯堡"), loc("柯瑪"), loc("格林德瓦"), loc("茲懷斯文")];
        const routeC_train = [[loc("慕尼黑"), loc("紐倫堡")], [loc("茲懷斯文"), loc("蒙投")], [loc("策馬特"), loc("施皮茨")]];
        const routeC_bus2 = [loc("蒙投"), loc("霞慕尼"), loc("策馬特"), loc("施皮茨"), loc("琉森"), loc("福森"), loc("國王湖"), loc("慕尼黑")];

        const routeD_bus = [loc("慕尼黑"), loc("紐倫堡"), loc("羅騰堡"), loc("海德堡"), loc("史特拉斯堡"), loc("柯瑪"), loc("格林德瓦"), loc("茲懷斯文")];
        const routeD_train = [[loc("茲懷斯文"), loc("蒙投")], [loc("霞慕尼"), loc("策馬特")]];
        const routeD_bus2 = [loc("蒙投"), loc("霞慕尼"), loc("策馬特"), loc("琉森"), loc("福森"), loc("國王湖"), loc("慕尼黑")];

        const routeE_bus = [loc("法蘭克福"), loc("海德堡"), loc("里屈埃維"), loc("伯恩"), loc("蒙投"), loc("策馬特"), loc("施皮茨"), loc("格林德瓦")];
        const routeE_train = [[loc("格林德瓦"), loc("茵特拉根")], [loc("茵特拉根"), loc("琉森")]];
        const routeE_bus2 = [loc("琉森"), loc("福森"), loc("羅騰堡"), loc("法蘭克福")];

        // Create Layer Groups
        const groupA = L.layerGroup([L.polyline(routeA_bus, {color: '#16a34a', weight: 5, opacity: 0.8}), L.polyline(routeA_bus2, {color: '#16a34a', weight: 5, opacity: 0.8}), L.polyline(routeA_train[0], {color: '#16a34a', weight: 3, opacity: 0.9, dashArray: '8, 8'}), L.polyline(routeA_train[1], {color: '#16a34a', weight: 3, opacity: 0.9, dashArray: '8, 8'})]).addTo(map);
        const groupB = L.layerGroup([L.polyline(routeB_bus, {color: '#6b7280', weight: 5, opacity: 0.8}), L.polyline(routeB_bus2, {color: '#6b7280', weight: 5, opacity: 0.8}), L.polyline(routeB_train[0], {color: '#6b7280', weight: 3, opacity: 0.9, dashArray: '8, 8'}), L.polyline(routeB_train[1], {color: '#6b7280', weight: 3, opacity: 0.9, dashArray: '8, 8'})]);
        const groupC = L.layerGroup([L.polyline(routeC_bus, {color: '#4f46e5', weight: 5, opacity: 0.8}), L.polyline(routeC_bus2, {color: '#4f46e5', weight: 5, opacity: 0.8}), L.polyline(routeC_train[0], {color: '#4f46e5', weight: 3, opacity: 0.9, dashArray: '8, 8'}), L.polyline(routeC_train[1], {color: '#4f46e5', weight: 3, opacity: 0.9, dashArray: '8, 8'}), L.polyline(routeC_train[2], {color: '#4f46e5', weight: 3, opacity: 0.9, dashArray: '8, 8'})]);
        const groupD = L.layerGroup([L.polyline(routeD_bus, {color: '#f97316', weight: 5, opacity: 0.8}), L.polyline(routeD_bus2, {color: '#f97316', weight: 5, opacity: 0.8}), L.polyline(routeD_train[0], {color: '#f97316', weight: 3, opacity: 0.9, dashArray: '8, 8'}), L.polyline(routeD_train[1], {color: '#f97316', weight: 3, opacity: 0.9, dashArray: '8, 8'})]);
        const groupE = L.layerGroup([L.polyline(routeE_bus, {color: '#0891b2', weight: 5, opacity: 0.8}), L.polyline(routeE_bus2, {color: '#0891b2', weight: 5, opacity: 0.8}), L.polyline(routeE_train[0], {color: '#0891b2', weight: 3, opacity: 0.9, dashArray: '8, 8'}), L.polyline(routeE_train[1], {color: '#0891b2', weight: 3, opacity: 0.9, dashArray: '8, 8'})]);

        const overlays = {
            "行程A (誠真15日)": groupA,
            "行程C (晴天15日)": groupC,
            "行程D (雋品14日)": groupD,
            "行程E (心憶13日)": groupE,
            "行程B (誠真14日)": groupB
        };
        
        for (const [key, value] of Object.entries(locations)) {
            L.marker([value.lat, value.lng]).bindPopup(`<strong>${key}</strong><br>${value.desc}`).addTo(map);
        }

        const legend = L.control({position: 'bottomright'});
        legend.onAdd = function (map) {
            var div = L.DomUtil.create('div', 'info legend');
            div.innerHTML += '<h4>交通方式</h4>';
            div.innerHTML += '<i style="background: black"></i> 巴士路線<br>';
            div.innerHTML += '<i class="dashed" style="border-color: black;"></i> 火車路線<br>';
            return div;
        };
        legend.addTo(map);

        L.control.layers(null, overlays, { collapsed: false }).addTo(map);
    });
</script>

</body>
</html>
