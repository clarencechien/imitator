<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº’å‹•å¼é€€ä¼‘æé ˜è¨ˆç•«æ¨¡æ“¬å™¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Stone & Slate -->
    <!-- Application Structure Plan: The SPA is designed as an educational journey. It starts with a hero section to introduce the core concept (4% rule evolution). The centerpiece is an interactive calculator and risk visualization chart, allowing users to immediately engage with the numbers and see the impact of their choices. This is followed by a detailed, organized exploration of the "8 variables" using an accordion structure, which breaks down complex information into digestible, user-controlled segments. This structure prioritizes user engagement and understanding over simply presenting the text, transforming a passive reading experience into an active learning tool. -->
    <!-- Visualization & Content Choices: 
        1. Key Stats (4% -> 4.7%): Goal: Inform. Method: Large, bold text. Justification: Grabs attention and highlights the key update.
        2. Withdrawal Rate vs. Success Rate Chart: Goal: Compare/Warn. Method: Interactive Bar Chart (Chart.js/Canvas). Interaction: A slider controls the withdrawal rate, and the chart updates in real-time to show the corresponding success probability. Justification: This makes the abstract concept of "risk of failure" tangible and personal, powerfully demonstrating the trade-offs.
        3. 8 Variables Section: Goal: Organize/Educate. Method: HTML/CSS Accordion. Interaction: Users click on a variable to expand and read details. Justification: Prevents information overload from a wall of text and encourages focused, self-paced learning.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
        }
        @media (min-width: 640px) {
            .chart-container {
                height: 350px;
            }
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .accordion-button.active + .accordion-content {
            max-height: 1000px; /* Set a large enough value */
        }
        .accordion-button .accordion-icon {
            transition: transform 0.3s ease-out;
        }
        .accordion-button.active .accordion-icon {
            transform: rotate(180deg);
        }
    </style>
</head>
<body class="bg-stone-50 text-slate-800">

    <div class="container mx-auto px-4 py-8 md:py-12">

        <header class="text-center mb-12">
            <h1 class="text-3xl md:text-5xl font-bold text-slate-900 mb-4">ä¸åªæ˜¯ 4% æ³•å‰‡</h1>
            <p class="text-lg md:text-xl text-slate-600 max-w-3xl mx-auto">ä¸€å€‹å›ºå®šçš„æé ˜ç‡ç„¡æ³•é©ç”¨æ–¼æ‰€æœ‰äººã€‚æ¢ç´¢å‰µå§‹äººæ¯”çˆ¾ãƒ»ç­æ ¹ (Bill Bengen) çš„æœ€æ–°æ´è¦‹ï¼Œæ‰“é€ çœŸæ­£å±¬æ–¼æ‚¨çš„å€‹äººåŒ–é€€ä¼‘è¨ˆç•«ã€‚</p>
        </header>

        <main>
            <section id="simulator" class="bg-white p-6 md:p-8 rounded-2xl shadow-lg mb-12">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold text-slate-900 mb-2">é€€ä¼‘æé ˜äº’å‹•æ¨¡æ“¬</h2>
                    <p class="text-slate-600">è¼¸å…¥æ‚¨çš„é€€ä¼‘è³‡ç”¢ç¸½é¡ï¼Œä¸¦èª¿æ•´ä¸‹æ–¹çš„æé ˜ç‡æ»‘æ¡¿ï¼Œè§€å¯Ÿä¸åŒæé ˜ç‡å°æ‡‰çš„é ä¼°æˆåŠŸç‡èˆ‡æé ˜é‡‘é¡ã€‚é€™èƒ½å¹«åŠ©æ‚¨ç›´è§€åœ°ç†è§£é¢¨éšªèˆ‡å ±é…¬çš„æ¬Šè¡¡ã€‚</p>
                </div>

                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div class="space-y-6">
                        <div>
                            <label for="totalAssets" class="block text-sm font-medium text-slate-700 mb-1">æ‚¨çš„é€€ä¼‘è³‡ç”¢ç¸½é¡ (è¬)</label>
                            <input type="number" id="totalAssets" class="w-full p-3 border border-slate-300 rounded-lg text-lg" value="1000">
                        </div>
                        
                        <div>
                            <label for="withdrawalRate" class="block text-sm font-medium text-slate-700">
                                æé ˜ç‡: <span id="rateValue" class="font-bold text-teal-600 text-lg">4.7%</span>
                            </label>
                            <input type="range" id="withdrawalRate" min="3" max="8" step="0.1" value="4.7" class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer">
                        </div>
                        
                        <div class="bg-stone-100 p-4 rounded-lg space-y-3">
                            <div>
                                <h4 class="font-semibold text-slate-800">é ä¼°ç¬¬ä¸€å¹´æé ˜é‡‘é¡</h4>
                                <p id="annualWithdrawal" class="text-2xl font-bold text-teal-700">470,000 å…ƒ</p>
                            </div>
                            <div>
                                <h4 class="font-semibold text-slate-800">ç›¸ç•¶æ–¼æ¯æœˆç”Ÿæ´»è²»</h4>
                                <p id="monthlyWithdrawal" class="text-lg text-slate-600">ç´„ 39,167 å…ƒ</p>
                            </div>
                        </div>
                         <div class="text-xs text-slate-500">
                            <p><strong>èªªæ˜:</strong> æˆåŠŸç‡æ•¸æ“šæ˜¯æ ¹æ“šæ­·å²å›æ¸¬çš„ç°¡åŒ–æ¨¡å‹ï¼Œåƒ…ä¾›åƒè€ƒã€‚4% ç´„æœ‰ 90% æˆåŠŸç‡ï¼Œæ¯æé«˜ 1% æé ˜ç‡ï¼Œå¤±æ•—é¢¨éšªå¯èƒ½ç¿»å€ã€‚å¯¦éš›çµæœå—å¸‚å ´ã€é€šè†¨ç­‰å¤šé‡å› ç´ å½±éŸ¿ã€‚</p>
                        </div>
                    </div>

                    <div>
                        <div class="chart-container">
                            <canvas id="successRateChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <section id="variables" class="mb-12">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold text-slate-900 mb-2">å½±éŸ¿æ‚¨é€€ä¼‘è¨ˆç•«çš„ 8 å¤§é—œéµè®Šæ•¸</h2>
                    <p class="text-slate-600 max-w-3xl mx-auto">å–®ç´”çš„æé ˜ç‡ä¸¦ä¸è¶³å¤ ã€‚ç­æ ¹æŒ‡å‡ºï¼Œæ‚¨å¿…é ˆé€šç›¤è€ƒé‡ä»¥ä¸‹å…«å€‹è®Šæ•¸ï¼Œæ‰èƒ½åˆ¶å®šå‡ºæ›´å®‰å…¨ã€æ›´å…·å½ˆæ€§çš„é€€ä¼‘ç­–ç•¥ã€‚é»æ“Šä¸‹æ–¹é …ç›®ä»¥å±•é–‹è©³ç´°èªªæ˜ã€‚</p>
                </div>
                
                <div id="accordionContainer" class="space-y-3 max-w-4xl mx-auto">
                </div>
            </section>

        </main>
        
        <footer class="text-center text-slate-500 text-sm mt-12">
            <p>å…§å®¹åŸºæ–¼ã€Œè½è¦‹ç†æŠ•ã€è¨ªè«‡ç¯€ç›®ï¼Œä¸¦åƒè€ƒ Bill Bengen çš„é€€ä¼‘è¦åŠƒç†è«–ã€‚</p>
            <p>æœ¬å·¥å…·åƒ…ç‚ºæ•™è‚²èˆ‡èªªæ˜ç”¨é€”ï¼Œä¸æ§‹æˆä»»ä½•æŠ•è³‡å»ºè­°ã€‚</p>
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const totalAssetsInput = document.getElementById('totalAssets');
            const withdrawalRateSlider = document.getElementById('withdrawalRate');
            const rateValueSpan = document.getElementById('rateValue');
            const annualWithdrawalSpan = document.getElementById('annualWithdrawal');
            const monthlyWithdrawalSpan = document.getElementById('monthlyWithdrawal');

            const accordionData = [
                {
                    title: "1. èµ·å§‹æé ˜ç‡èˆ‡é€šè†¨",
                    icon: "ğŸ“ˆ",
                    content: "ç­æ ¹å»ºè­°ä»¥ <strong>4.7%</strong> ä½œç‚ºä¿å®ˆçš„èµ·å§‹é»ã€‚æ›´é—œéµçš„æ˜¯ï¼Œå¾ŒçºŒæ¯å¹´æ‡‰æ ¹æ“š <strong>å€‹äººå¯¦éš›çš„é€šè†¨æ„Ÿå—</strong>ï¼ˆè€Œéå®˜æ–¹CPIï¼‰ä¾†èª¿æ•´æé ˜é‡‘é¡ã€‚ä»–èªç‚ºé«˜é€šè†¨æ¯”è‚¡ç½æ›´é›£è™•ç†ï¼Œå› ç‚ºä¸Šæ¼²çš„ç‰©åƒ¹æ˜¯å›ä¸å»çš„ã€‚ä¾‹å¦‚ï¼Œè‹¥æ‚¨çš„æˆ¿ç§Ÿæ¼²å¹…é è¶…å¹³å‡é€šè†¨ï¼Œæ‚¨çš„æé ˜é‡‘é¡ä¹Ÿæ‡‰ç›¸æ‡‰å¢åŠ ã€‚"
                },
                {
                    title: "2. é ä¼°æé ˜å¹´é™",
                    icon: "â³",
                    content: "æ‚¨é æœŸæ´»åˆ°å¹¾æ­²ï¼Ÿéš¨è‘—é†«ç™‚é€²æ­¥ï¼Œå£½å‘½å¯èƒ½æœƒæ¯”é æœŸé•·ã€‚è‹¥æ‚¨åªè¦åŠƒåˆ°95æ­²ï¼Œå»æ´»åˆ°105æ­²ï¼Œå¾Œé¢çš„10å¹´å°‡é¢è‡¨è²¡å‹™å›°å¢ƒã€‚è¦åŠƒæ™‚æ‡‰æŠ±æŒæœªé›¨ç¶¢ç¹†çš„å¿ƒæ…‹ï¼Œ<strong>é ç•™ç·©è¡</strong>ï¼Œä¾‹å¦‚å¤šè¦åŠƒ10å¹´çš„ç”Ÿæ´»è²»ï¼Œä»¥æ‡‰å°é•·å£½é¢¨éšªã€‚"
                },
                {
                    title: "3. ç¨…å‹™æˆæœ¬",
                    icon: "ğŸ’¸",
                    content: "åœ¨å°ç£ï¼Œè³‡æœ¬åˆ©å¾—å…ç¨…ï¼Œä½†<strong>è‚¡åˆ©æ‰€å¾—éœ€è¦ç¹³ç¨…</strong>ã€‚è‹¥æ‚¨çš„é€€ä¼‘ç¾é‡‘æµä¸»è¦ä¾†è‡ªé«˜è‚¡æ¯ï¼Œå¿…é ˆå°‡ç¨…å‹™æˆæœ¬ç´å…¥è€ƒé‡ã€‚åƒè¬ä¸è¦ç‚ºäº†å½Œè£œç¨…å‹™æ”¯å‡ºè€Œæé«˜æé ˜ç‡ï¼Œé€™æœƒå¤§å¹…å¢åŠ ææ—©è€—ç›¡è³‡ç”¢çš„é¢¨éšªã€‚æ­£ç¢ºçš„åšæ³•åè€Œæ˜¯<strong>é©åº¦ã€é™ä½ã€æé ˜ç‡</strong>ï¼Œä»¥ç¢ºä¿è¨ˆç•«çš„é•·æœŸå®‰å…¨æ€§ã€‚"
                },
                {
                    title: "4. æ˜¯å¦ç•™ä¸‹éºç”¢",
                    icon: "ğŸ",
                    content: "å¦‚æœæ‚¨è¨ˆç•«ç•™éŒ¢çµ¦ä¸‹ä¸€ä»£æˆ–é…å¶ï¼Œæé ˜ç‡å°±å¿…é ˆæ›´åŠ ä¿å®ˆã€‚æ‚¨çš„ç›®æ¨™ä¸å†åªæ˜¯åœ¨é›¢ä¸–å‰å‰›å¥½èŠ±å…‰æ‰€æœ‰éŒ¢ï¼Œè€Œæ˜¯è¦ç¢ºä¿åœ¨çµ‚é»æ™‚ï¼Œä»æœ‰æ‚¨æœŸæœ›ç•™ä¸‹çš„è³‡ç”¢æ•¸é¡ã€‚é€™æœƒç›´æ¥é™åˆ¶æ‚¨å¯ä»¥å®‰å…¨æé ˜çš„ç™¾åˆ†æ¯”ã€‚"
                },
                {
                    title: "5. è³‡ç”¢é…ç½®èˆ‡éˆæ´»æé ˜",
                    icon: "ğŸ“Š",
                    content: "ç­æ ¹èªç‚ºï¼Œé€€ä¼‘å¾Œçš„è‚¡ç¥¨é…ç½®ä»‹æ–¼ <strong>50% è‡³ 75%</strong> ä¹‹é–“ï¼Œé•·æœŸä¾†çœ‹å·®ç•°ä¸å¤§ã€‚é—œéµåœ¨æ–¼<strong>éˆæ´»æé ˜èˆ‡å†å¹³è¡¡</strong>ã€‚ä¾‹å¦‚ï¼Œç•¶è‚¡å¸‚å¤§è·Œæ™‚ï¼Œæ‡‰å„ªå…ˆè³£å‡ºå¯èƒ½å› é¿éšªæƒ…ç·’è€Œä¸Šæ¼²çš„å‚µåˆ¸ï¼Œè€Œéåœ¨ä½é»è³¤è³£è‚¡ç¥¨è³‡ç”¢ã€‚é€™ç¨®ç­–ç•¥èƒ½è®“æ‚¨çš„è³‡ç”¢åœ¨å±æ©Ÿä¸­ä¿å­˜å¯¦åŠ›ï¼Œç­‰å¾…å¾©ç”¦ã€‚"
                },
                {
                    title: "6. æŠ•è³‡æ–¹å¼ï¼ˆä¸»å‹• vs. è¢«å‹•ï¼‰",
                    icon: "ğŸ¯",
                    content: "4.7% æ³•å‰‡æ˜¯å»ºç«‹åœ¨<strong>æŠ•è³‡å¤§ç›¤æŒ‡æ•¸ (ETF)</strong> çš„åŸºç¤ä¸Šï¼Œäº«å—å¸‚å ´å¹³å‡å ±é…¬ä¸¦åˆ†æ•£é¢¨éšªã€‚å¦‚æœæ‚¨æ˜¯è‡ªè¡Œé¸è‚¡ï¼ˆä¾‹å¦‚å–®å£“å°ç©é›»ï¼‰ï¼Œå°‡é¢è‡¨å·¨å¤§çš„ä¸ç¢ºå®šæ€§ï¼Œç„¡æ³•ç›´æ¥å¥—ç”¨æ­¤æ³•å‰‡ã€‚æ²’æœ‰äººèƒ½ä¿è­‰ä¸€å®¶å…¬å¸èƒ½æŒçºŒå¼·ç››ä¸‰ã€å››åå¹´ï¼Œå°‡æ•´å€‹é€€ä¼‘ç”Ÿæ´»æŠ¼æ³¨åœ¨å–®ä¸€å…¬å¸ä¸Šæ˜¯æ¥µé«˜é¢¨éšªçš„è¡Œç‚ºã€‚"
                },
                {
                    title: "7. æé ˜æ–¹å¼çš„ç´€å¾‹",
                    icon: "ğŸ—“ï¸",
                    content: "æ‚¨é¸æ“‡å¹´åˆä¸€æ¬¡é ˜å®Œé‚„æ˜¯ä¸€å€‹æœˆé ˜ä¸€æ¬¡ï¼Ÿ<strong>å¹´åˆé ˜å®Œ</strong>ï¼Œç”¨éŒ¢å½ˆæ€§å¤§ï¼Œä½†è€ƒé©—ç´€å¾‹ï¼Œå¯èƒ½å¹´åˆæ®éœå°è‡´å¹´åº•æ‹®æ®ã€‚<strong>æŒ‰æœˆé ˜å–</strong>ï¼Œé›–ç¼ºä¹å½ˆæ€§ï¼Œä½†èƒ½ç¢ºä¿æ¯æœˆæœ‰ç©©å®šç¾é‡‘æµï¼Œé©åˆéœ€è¦å¤–éƒ¨ç´„æŸä¾†ç¶­æŒç´€å¾‹çš„äººã€‚è«‹é¸æ“‡æœ€ç¬¦åˆæ‚¨å€‹æ€§çš„æ–¹å¼ã€‚"
                },
                {
                    title: "8. éˆæ´»æ€§èˆ‡å®šæœŸæª¢è¦–",
                    icon: "ğŸ”„",
                    content: "é€€ä¼‘è¦åŠƒä¸¦éä¸€æˆä¸è®Šçš„å…¬å¼ã€‚é€™æ˜¯ä¸€å€‹éœ€è¦æŒçºŒé—œæ³¨èˆ‡èª¿æ•´çš„å‹•æ…‹éç¨‹ã€‚æ‚¨æ‡‰è©²å®šæœŸæª¢è¦–æ‚¨çš„é–‹éŠ·ã€æŠ•è³‡çµ„åˆè¡¨ç¾ã€å¥åº·ç‹€æ³ä»¥åŠå¸‚å ´å¤§ç’°å¢ƒçš„è®ŠåŒ–ï¼Œä¸¦å°æ‚¨çš„æé ˜ç­–ç•¥åšå‡ºç›¸æ‡‰çš„å¾®èª¿ï¼Œä»¥ç¢ºä¿è¨ˆç•«å§‹çµ‚èˆ‡æ‚¨çš„å¯¦éš›ç”Ÿæ´»ä¿æŒä¸€è‡´ã€‚"
                }
            ];

            const accordionContainer = document.getElementById('accordionContainer');
            accordionData.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = "border border-slate-200 rounded-lg bg-white";
                div.innerHTML = `
                    <button class="accordion-button w-full flex justify-between items-center text-left p-4 font-semibold text-slate-800 hover:bg-stone-100 rounded-lg focus:outline-none">
                        <span class="flex items-center">
                            <span class="text-xl mr-3">${item.icon}</span>
                            <span>${item.title}</span>
                        </span>
                        <span class="accordion-icon text-slate-500 transform transition-transform">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </span>
                    </button>
                    <div class="accordion-content">
                        <p class="p-4 pt-0 text-slate-600 leading-relaxed">${item.content}</p>
                    </div>
                `;
                accordionContainer.appendChild(div);
            });
            
            accordionContainer.addEventListener('click', (e) => {
                const button = e.target.closest('.accordion-button');
                if (button) {
                    const allButtons = accordionContainer.querySelectorAll('.accordion-button');
                    const isActive = button.classList.contains('active');
                    
                    allButtons.forEach(btn => {
                        btn.classList.remove('active');
                    });

                    if (!isActive) {
                        button.classList.add('active');
                    }
                }
            });

            const successRates = {
                '3.0': 98, '3.1': 98, '3.2': 97, '3.3': 97, '3.4': 96, '3.5': 95,
                '3.6': 95, '3.7': 94, '3.8': 93, '3.9': 92, '4.0': 90, '4.1': 88,
                '4.2': 86, '4.3': 84, '4.4': 82, '4.5': 80, '4.6': 78, '4.7': 75,
                '4.8': 72, '4.9': 70, '5.0': 68, '5.1': 65, '5.2': 62, '5.3': 60,
                '5.4': 58, '5.5': 55, '5.6': 53, '5.7': 51, '5.8': 49, '5.9': 47,
                '6.0': 45, '6.1': 43, '6.2': 41, '6.3': 39, '6.4': 37, '6.5': 35,
                '6.6': 33, '6.7': 31, '6.8': 29, '6.9': 27, '7.0': 25, '7.1': 23,
                '7.2': 21, '7.3': 20, '7.4': 19, '7.5': 18, '7.6': 17, '7.7': 16,
                '7.8': 15, '7.9': 14, '8.0': 13
            };

            const ctx = document.getElementById('successRateChart').getContext('2d');
            const successRateChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['é ä¼°æˆåŠŸç‡'],
                    datasets: [{
                        label: 'æˆåŠŸç‡ (%)',
                        data: [75],
                        backgroundColor: ['rgba(20, 184, 166, 0.6)'],
                        borderColor: ['rgba(13, 148, 136, 1)'],
                        borderWidth: 1,
                        borderRadius: 5,
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return value + '%'
                                }
                            }
                        },
                        y: {
                           grid: {
                                display: false
                           }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return ` ${context.raw}% çš„æ©Ÿç‡å¯æ”¯æ’30å¹´ä»¥ä¸Š`;
                                }
                            }
                        }
                    }
                }
            });

            function updateSimulator() {
                const assets = parseFloat(totalAssetsInput.value) * 10000;
                const rate = parseFloat(withdrawalRateSlider.value);

                if (isNaN(assets) || assets < 0) return;

                const annual = assets * (rate / 100);
                const monthly = annual / 12;

                rateValueSpan.textContent = `${rate.toFixed(1)}%`;
                annualWithdrawalSpan.textContent = `${annual.toLocaleString('zh-TW', { maximumFractionDigits: 0 })} å…ƒ`;
                monthlyWithdrawalSpan.textContent = `ç´„ ${monthly.toLocaleString('zh-TW', { maximumFractionDigits: 0 })} å…ƒ`;
                
                const successRate = successRates[rate.toFixed(1)] || 0;
                successRateChart.data.datasets[0].data[0] = successRate;
                
                const colorRate = Math.max(0, (100 - successRate) / 75); // Normalize color change
                const red = Math.floor(255 * colorRate);
                const green = Math.floor(200 * (1 - colorRate));
                const blue = Math.floor(150 * (1 - colorRate));
                const bgColor = `rgba(${20 + red*0.8}, ${184 - green*0.2}, ${166 - blue*0.3}, 0.6)`;
                const borderColor = `rgba(${13 + red*0.8}, ${148 - green*0.2}, ${136 - blue*0.3}, 1)`;
                
                successRateChart.data.datasets[0].backgroundColor[0] = bgColor;
                successRateChart.data.datasets[0].borderColor[0] = borderColor;

                successRateChart.update();
            }

            totalAssetsInput.addEventListener('input', updateSimulator);
            withdrawalRateSlider.addEventListener('input', updateSimulator);

            updateSimulator();
        });
    </script>
</body>
</html>

