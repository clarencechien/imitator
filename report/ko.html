<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>柯文哲與民進黨關係剖析</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif; /* Inter for English, Noto Sans TC for Chinese */
            background-color: #f0f2f5; /* Slightly off-white background */
        }
        .nav-link {
            display: block;
            padding: 0.75rem 1rem;
            margin-bottom: 0.5rem;
            border-radius: 0.5rem; /* md */
            color: #374151; /* gray-700 */
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
            cursor: pointer;
        }
        .nav-link:hover {
            background-color: #e5e7eb; /* gray-200 */
            color: #1f2937; /* gray-800 */
        }
        .nav-link.active {
            background-color: #3b82f6; /* blue-500 */
            color: white;
            font-weight: 600;
        }
        .content-section {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        .content-section.active {
            display: block;
        }
        .content-section h2 {
            font-size: 1.75rem; /* text-2xl */
            font-weight: 700; /* bold */
            color: #1f2937; /* gray-800 */
            margin-bottom: 1.5rem; /* mb-6 */
            border-bottom: 2px solid #3b82f6; /* blue-500 */
            padding-bottom: 0.5rem;
        }
        .content-section h3 {
            font-size: 1.25rem; /* text-xl */
            font-weight: 600; /* semibold */
            color: #374151; /* gray-700 */
            margin-top: 1.5rem; /* mt-6 */
            margin-bottom: 0.75rem; /* mb-3 */
        }
        .content-section p, .content-section li {
            font-size: 1rem; /* text-base */
            line-height: 1.75; /* leading-relaxed */
            color: #4b5563; /* gray-600 */
            margin-bottom: 1rem; /* mb-4 */
        }
        .ai-interaction-container {
            margin-top: 1.5rem; /* mt-6 */
            padding-top: 1.5rem; /* pt-6 */
            border-top: 1px solid #e5e7eb; /* border-gray-200 */
        }
        .ai-button {
            background-color: #2563eb; /* blue-600 */
            color: white;
            font-weight: 500; /* medium */
            padding: 0.5rem 1rem; /* py-2 px-4 */
            border-radius: 0.375rem; /* rounded-md */
            transition: background-color 0.2s ease-in-out;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
        }
        .ai-button:hover {
            background-color: #1d4ed8; /* blue-700 */
        }
        .ai-result-area {
            margin-top: 0.75rem; /* mt-3 */
            padding: 0.75rem; /* p-3 */
            background-color: #f9fafb; /* gray-50 */
            border: 1px solid #e5e7eb; /* border-gray-200 */
            border-radius: 0.375rem; /* rounded-md */
            min-height: 50px;
        }
        .ai-loading-indicator {
            margin-top: 0.5rem; /* mt-2 */
            font-size: 0.875rem; /* text-sm */
            color: #6b7280; /* gray-500 */
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Custom scrollbar for webkit browsers */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="antialiased">
    <div class="container mx-auto p-4 md:p-8 max-w-6xl">
        <header class="text-center py-6 md:py-10 bg-white rounded-xl shadow-lg mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">柯文哲與民進黨關係剖析</h1>
            <p class="text-md md:text-lg text-gray-600 mt-2">互動式分析網站 (整合 AI 智慧分析)</p>
        </header>

        <div class="flex flex-col md:flex-row gap-6 md:gap-8">
            <nav id="sidebar" class="md:w-1/3 lg:w-1/4 bg-white p-6 rounded-xl shadow-lg h-fit md:sticky md:top-8">
                <h2 class="text-xl font-semibold text-gray-700 mb-4 pb-2 border-b border-gray-300">章節導覽</h2>
                <ul id="nav-links">
                    <li><a href="#section1" class="nav-link active">前言與總覽</a></li>
                    <li><a href="#section2" class="nav-link">柯文哲的論述與現實</a></li>
                    <li><a href="#section3" class="nav-link">2014年合作的背景與本質</a></li>
                    <li><a href="#section4" class="nav-link">合作的裂痕：期望與野心</a></li>
                    <li><a href="#section5" class="nav-link">權力、規範與決裂</a></li>
                    <li><a href="#section6" class="nav-link">市政影響與後續發展</a></li>
                    <li><a href="#section7" class="nav-link">作者的總結與評價</a></li>
                    <li><a href="#ai-analysis-section" class="nav-link">✨ AI 互動分析</a></li>
                </ul>
            </nav>

            <main id="content-area" class="md:w-2/3 lg:w-3/4 bg-white p-6 md:p-8 rounded-xl shadow-lg">
                <section id="section1" class="content-section active">
                    <h2>前言與總覽</h2>
                    <p>這篇文章深入探討了柯文哲與民進黨從合作到決裂的複雜過程，並分析了其背後的政治現實與個人算計。</p>
                    <p>透過不同章節的剖析，我們可以逐步理解這段政治合作關係的起點、轉折以及最終分道揚鑣的深層原因。</p>
                    <div class="ai-interaction-container">
                        <h3 class="text-lg font-semibold text-gray-700 mb-2">✨ AI 延伸討論</h3>
                        <button class="ai-discuss-button ai-button" data-section-title-selector="h2">
                            請求 AI 延伸討論此章節
                        </button>
                        <div class="ai-loading-indicator mt-2 text-sm text-gray-500" style="display: none;">AI 正在思考中...</div>
                        <div class="ai-discussion-result ai-result-area" style="display: none;">
                            </div>
                    </div>
                </section>

                <section id="section2" class="content-section">
                    <h2>柯文哲的論述與現實</h2>
                    <h3>柯文哲的「美化」敘事</h3>
                    <p>柯文哲常將與民進黨的分手歸咎於對方，塑造自身清流形象，並聲稱在其清除民進黨「酬庸」人馬後，市政才步上軌道。</p>
                    <h3>現實落差</h3>
                    <p>作者觀點認為，柯文哲第一任市長（與民進黨合作時期）的政績（如世大運、償還債務）反而較為顯著。其第二任（民眾黨主導）則缺乏亮眼建樹，且多有爭議案件（如京華城、北士科），甚至可能使其面臨法律問題。</p>
                    <h3>分手擂台的政治操作</h3>
                    <p>作者將此比喻為男女分手，一方為維護自身形象，選擇性陳述對自己有利的說法，掩蓋自身問題，將責任推給對方。柯文哲的作法被視為一種馬基維利式的政治手段：為達目的，不問道義。</p>
                    <div class="ai-interaction-container">
                        <h3 class="text-lg font-semibold text-gray-700 mb-2">✨ AI 延伸討論</h3>
                        <button class="ai-discuss-button ai-button" data-section-title-selector="h2">
                            請求 AI 延伸討論此章節
                        </button>
                        <div class="ai-loading-indicator mt-2 text-sm text-gray-500" style="display: none;">AI 正在思考中...</div>
                        <div class="ai-discussion-result ai-result-area" style="display: none;">
                        </div>
                    </div>
                </section>

                <section id="section3" class="content-section">
                    <h2>2014年合作的背景與本質</h2>
                    <h3>合作背景</h3>
                    <p>2014年，柯文哲雖有個人聲望，但缺乏政治資源與選舉團隊，難以獨自當選台北市長。然而，他的參選卻可能分散泛綠票源，對民進黨選情構成威脅。</p>
                    <h3>民進黨的「白手套」策略</h3>
                    <p>民進黨在評估整體選情後，決定支持柯文哲，將其視為擊敗國民黨、奪取首都執政權的「白手套」。此策略意味著民進黨在一定程度上犧牲了自身的主體性，以換取選舉的成功機會。</p>
                    <h3>柯文哲的學習</h3>
                    <p>柯文哲從這次成功的合作經驗中，體悟並可能掌握了「以參與選戰製造變數，進而換取實質政治利益」的操作模式。</p>
                    <div class="ai-interaction-container">
                        <h3 class="text-lg font-semibold text-gray-700 mb-2">✨ AI 延伸討論</h3>
                        <button class="ai-discuss-button ai-button" data-section-title-selector="h2">
                            請求 AI 延伸討論此章節
                        </button>
                        <div class="ai-loading-indicator mt-2 text-sm text-gray-500" style="display: none;">AI 正在思考中...</div>
                        <div class="ai-discussion-result ai-result-area" style="display: none;">
                        </div>
                    </div>
                </section>

                <section id="section4" class="content-section">
                    <h2>合作的裂痕：期望與野心</h2>
                    <h3>民進黨的盤算</h3>
                    <p>民進黨的理想劇本是，由柯文哲擔任名義上的市長，實際市政運作則由具民進黨背景或理念相近的政務官（如蘇麗瓊、林欽榮等）主導，為民進黨未來在台北市的執政鋪路。柯文哲則可在任期結束後安全下莊，淡出政治核心。</p>
                    <h3>柯文哲的不甘與野心</h3>
                    <p>柯文哲顯然不甘於僅僅扮演樣板市長的角色。他自認能力超群，應當掌握實質權力。對於民進黨官員在市政上的「制衡」與建議，他可能視為干涉與架空，並對此感到憤怒。他逐漸形成「是自己為民進黨打下江山，而非民進黨成就了他」的認知。</p>
                    <div class="ai-interaction-container">
                        <h3 class="text-lg font-semibold text-gray-700 mb-2">✨ AI 延伸討論</h3>
                        <button class="ai-discuss-button ai-button" data-section-title-selector="h2">
                            請求 AI 延伸討論此章節
                        </button>
                        <div class="ai-loading-indicator mt-2 text-sm text-gray-500" style="display: none;">AI 正在思考中...</div>
                        <div class="ai-discussion-result ai-result-area" style="display: none;">
                        </div>
                    </div>
                </section>

                <section id="section5" class="content-section">
                    <h2>權力、規範與決裂</h2>
                    <h3>民進黨的「保護」vs. 柯文哲的「掙脫」</h3>
                    <p>作者認為，民進黨透過人事安排與制度規範，某種程度上是在「保護」缺乏執政經驗的政治素人柯文哲，避免其因不熟悉權力運作而犯下重大錯誤，甚至走向腐化。</p>
                    <h3>柯文哲對規範的態度</h3>
                    <p>柯文哲則可能將這些規範視為對其施展抱負的束縛，並認為自己有能力「繞過」或「超越」現有規則。其第二任市長任內對法規的詮釋、市府的人事佈局（被外界部分人士指為多用親信、經驗不足者），以及後來引發社會廣泛討論的重大標案與政治獻金處理方式，都被作者解讀為這種心態的具體展現。</p>
                    <h3>清除異己與關係破裂</h3>
                    <p>隨著雙方矛盾加劇，柯文哲開始清除市府內被其視為民進黨的人馬，並為自己的行為建構「撥亂反正」、「清除酬庸」的意識形態論述，最終導致雙方公開決裂。</p>
                    <div class="ai-interaction-container">
                        <h3 class="text-lg font-semibold text-gray-700 mb-2">✨ AI 延伸討論</h3>
                        <button class="ai-discuss-button ai-button" data-section-title-selector="h2">
                            請求 AI 延伸討論此章節
                        </button>
                        <div class="ai-loading-indicator mt-2 text-sm text-gray-500" style="display: none;">AI 正在思考中...</div>
                        <div class="ai-discussion-result ai-result-area" style="display: none;">
                        </div>
                    </div>
                </section>

                <section id="section6" class="content-section">
                    <h2>市政影響與後續發展</h2>
                    <h3>第二任市政評價</h3>
                    <p>作者對柯文哲第二任市長的市政表現持批判態度，認為其缺乏長遠規劃，許多決策可能更多基於個人意志而非專業評估，導致專業官僚體系運作受阻，部分優秀人才流失。</p>
                    <h3>成立台灣民眾黨</h3>
                    <p>為了延續個人的政治生命並證明自身路線的正確性，柯文哲選擇成立台灣民眾黨。然而，作者認為，為了在短時間內快速累積政治資源與影響力，民眾黨的發展與柯文哲後續的政治操作，可能採取了一些具高度爭議性甚至法律風險的手段。</p>
                    <h3>潛在的法律風險</h3>
                    <p>作者暗示，柯文哲在第二任內的某些決策與資金運作方式，可能為其日後埋下了法律上的隱患。</p>
                    <div class="ai-interaction-container">
                        <h3 class="text-lg font-semibold text-gray-700 mb-2">✨ AI 延伸討論</h3>
                        <button class="ai-discuss-button ai-button" data-section-title-selector="h2">
                            請求 AI 延伸討論此章節
                        </button>
                        <div class="ai-loading-indicator mt-2 text-sm text-gray-500" style="display: none;">AI 正在思考中...</div>
                        <div class="ai-discussion-result ai-result-area" style="display: none;">
                        </div>
                    </div>
                </section>

                <section id="section7" class="content-section">
                    <h2>作者的總結與評價</h2>
                    <h3>「如果當初」的設想</h3>
                    <p>作者提出一種假設：如果柯文哲能更清晰地認識自身的政治定位與現實環境，接受民進黨最初的合作安排（即扮演好「白手套」市長的角色，專注於名義上的職責，將實際市政運作交由專業團隊），他或許能夠安然完成八年市長任期，在台灣政治史上留下一個相對平穩的評價，並避免後來的種種爭議與可能的法律困境。</p>
                    <h3>民進黨的雙重角色</h3>
                    <p>在作者看來，民進黨當初的限制性安排，客觀上也可能起到保護柯文哲的作用，避免一個政治素人過快地掌握並濫用巨大權力。</p>
                    <h3>個人選擇的代價</h3>
                    <p>然而，柯文哲的個人野心、對權力運作的理解以及對自身能力的判斷，使他選擇了與民進黨決裂，並走上了一條更具挑戰性與風險的道路。作者認為，柯文哲後續可能面臨的政治與法律困境，很大程度上是他個人選擇的結果，是其政治地位與實際德行、能力不相匹配所導致的必然。儘管令人唏噓，但終究需由其個人承擔。</p>
                    <div class="ai-interaction-container">
                        <h3 class="text-lg font-semibold text-gray-700 mb-2">✨ AI 延伸討論</h3>
                        <button class="ai-discuss-button ai-button" data-section-title-selector="h2">
                            請求 AI 延伸討論此章節
                        </button>
                        <div class="ai-loading-indicator mt-2 text-sm text-gray-500" style="display: none;">AI 正在思考中...</div>
                        <div class="ai-discussion-result ai-result-area" style="display: none;">
                        </div>
                    </div>
                </section>
                
                <section id="ai-analysis-section" class="content-section">
                    <h2>✨ AI 互動觀點分析</h2>
                    <p>對於柯文哲與民進黨的關係，或本文中的任何觀點，您有什麼想進一步探討或分析的嗎？請在下方輸入您的問題或想討論的主題，讓 AI 為您提供一些初步的觀點或分析方向。</p>
                    <textarea id="ai-general-input" class="w-full h-32 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150 ease-in-out mt-2" placeholder="例如：柯文哲在第一任市長期間，與民進黨合作的具體挑戰有哪些？ 或 民進黨為何最終決定不繼續支持柯文哲？"></textarea>
                    <button id="ai-general-submit" class="ai-button mt-3 bg-green-600 hover:bg-green-700">
                        提交給 AI 分析
                    </button>
                    <div id="ai-general-loading" class="ai-loading-indicator" style="display: none;">AI 正在思考中，請稍候...</div>
                    <div id="ai-general-result" class="ai-result-area" style="display: none;">
                        </div>
                </section>

            </main>
        </div>

        <footer class="text-center py-8 mt-10 text-gray-500 border-t border-gray-300">
            <p>&copy; <span id="currentYear"></span> 政治光譜分析。本內容僅為原文作者觀點呈現，不代表本平台立場。</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const navLinks = document.querySelectorAll('.nav-link');
            const contentSections = document.querySelectorAll('.content-section');

            // 設定初始顯示的區塊
            const initialSectionId = window.location.hash || '#section1';
            showSection(initialSectionId);

            navLinks.forEach(link => {
                link.addEventListener('click', function (event) {
                    event.preventDefault();
                    const targetId = this.getAttribute('href');
                    showSection(targetId);
                    if (history.pushState) {
                        history.pushState(null, null, targetId);
                    } else {
                        window.location.hash = targetId;
                    }
                });
            });

            function showSection(targetId) {
                contentSections.forEach(section => {
                    if ('#' + section.id === targetId) {
                        section.classList.add('active');
                    } else {
                        section.classList.remove('active');
                    }
                });

                navLinks.forEach(link => {
                    if (link.getAttribute('href') === targetId) {
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });
                if (window.innerWidth < 768) {
                    const contentArea = document.getElementById('content-area');
                    if(contentArea) {
                        // Scroll to the top of the main content area, not the specific section
                        // to ensure the header/nav is visible if they were scrolled past.
                        document.body.scrollTop = 0; // For Safari
                        document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
                        // Then scroll to the section if needed, but usually the above is enough.
                        // const sectionElement = document.querySelector(targetId);
                        // if(sectionElement) sectionElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }
            }
            
            document.getElementById('currentYear').textContent = new Date().getFullYear();

            window.addEventListener('popstate', function() {
                const currentHash = window.location.hash || '#section1';
                showSection(currentHash);
            });

            // --- AI Interaction Logic ---
            async function callGeminiAPI(prompt, resultElement, loadingElement) {
                if (!prompt || !prompt.trim()) {
                    resultElement.innerHTML = '<p class="text-red-500">請輸入有效的內容進行分析。</p>';
                    resultElement.style.display = 'block';
                    loadingElement.style.display = 'none';
                    return;
                }

                loadingElement.style.display = 'block';
                resultElement.style.display = 'none';
                resultElement.innerHTML = ''; // Clear previous results

                const apiKey = ""; // API Key is handled by the environment
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                
                const chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
                const payload = { contents: chatHistory };

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        let errorMsg = `API 請求失敗，狀態碼：${response.status}.`;
                        try {
                            const errorData = await response.json();
                            errorMsg += ` ${errorData?.error?.message || ''}`;
                            console.error('API Error Data:', errorData);
                        } catch (e) {
                            errorMsg += ` 無法解析錯誤回應。`;
                            console.error('Could not parse error response:', e);
                        }
                        throw new Error(errorMsg);
                    }

                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        // Simple sanitization: replace newlines with <br> and escape HTML tags
                        const sanitizedText = text
                            .replace(/&/g, "&amp;")
                            .replace(/</g, "&lt;")
                            .replace(/>/g, "&gt;")
                            .replace(/"/g, "&quot;")
                            .replace(/'/g, "&#039;")
                            .replace(/\n/g, "<br>");
                        resultElement.innerHTML = `<p>${sanitizedText}</p>`;
                    } else if (result.promptFeedback && result.promptFeedback.blockReason) {
                        console.warn('AI response blocked:', result.promptFeedback);
                        let blockMessage = `AI 回應因以下原因被阻擋：${result.promptFeedback.blockReason}.`;
                        if (result.promptFeedback.safetyRatings) {
                            blockMessage += " 安全性評級：" + result.promptFeedback.safetyRatings.map(r => `${r.category}: ${r.probability}`).join(', ');
                        }
                         resultElement.innerHTML = `<p class="text-orange-600">${blockMessage}</p>`;
                    }
                    else {
                        console.error('Unexpected API response structure:', result);
                        resultElement.innerHTML = '<p class="text-red-500">無法從 AI 獲取有效的回應，回應結構不符預期或內容為空。</p>';
                    }
                } catch (error) {
                    console.error('Fetch Error or other JS error:', error);
                    resultElement.innerHTML = `<p class="text-red-500">與 AI 連線或處理回應時發生錯誤：${error.message}</p>`;
                } finally {
                    loadingElement.style.display = 'none';
                    resultElement.style.display = 'block';
                }
            }

            // General AI Analysis Section
            const aiGeneralSubmitButton = document.getElementById('ai-general-submit');
            const aiGeneralInput = document.getElementById('ai-general-input');
            const aiGeneralResult = document.getElementById('ai-general-result');
            const aiGeneralLoading = document.getElementById('ai-general-loading');

            if (aiGeneralSubmitButton && aiGeneralInput && aiGeneralResult && aiGeneralLoading) {
                aiGeneralSubmitButton.addEventListener('click', function() {
                    const userPrompt = aiGeneralInput.value;
                    // Prepend context to the user's prompt for better results
                    const contextualPrompt = `關於以下主題：「柯文哲與民進黨的關係分析」，請針對使用者提出的這個觀點或問題進行回應：「${userPrompt}」。請提供分析、不同角度的看法或相關補充資訊。`;
                    callGeminiAPI(contextualPrompt, aiGeneralResult, aiGeneralLoading);
                });
            }

            // Section-specific AI Discussions
            const aiDiscussButtons = document.querySelectorAll('.ai-discuss-button');
            aiDiscussButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const section = this.closest('.content-section');
                    const titleSelector = this.dataset.sectionTitleSelector || 'h2';
                    const sectionTitleElement = section ? section.querySelector(titleSelector) : null;
                    const sectionTitle = sectionTitleElement ? sectionTitleElement.textContent.trim() : '此章節的內容';
                    
                    const prompt = `請針對以下主題「${sectionTitle}」提供更深入的延伸討論、相關事件分析或不同角度的觀點。`;
                    
                    // Find sibling elements for loading and result display
                    let currentElement = this.nextElementSibling;
                    let loadingElement = null;
                    let resultElement = null;

                    // Find loading indicator (should be first)
                    if (currentElement && currentElement.classList.contains('ai-loading-indicator')) {
                        loadingElement = currentElement;
                        currentElement = currentElement.nextElementSibling; // Move to next sibling
                    }
                    // Find result area (should be next)
                    if (currentElement && currentElement.classList.contains('ai-discussion-result')) {
                        resultElement = currentElement;
                    }
                    
                    if (resultElement && loadingElement) {
                        callGeminiAPI(prompt, resultElement, loadingElement);
                    } else {
                        console.error('無法找到 AI 討論區塊的載入或結果顯示元素。按鈕的 HTML 結構可能需要調整。');
                        // Fallback or direct alert for critical failure
                        const fallbackResultDiv = section.querySelector('.ai-discussion-result'); // Try a broader search
                        if (fallbackResultDiv) {
                             fallbackResultDiv.innerHTML = '<p class="text-red-500">介面錯誤：無法正確觸發 AI 功能。請檢查控制台。';
                             fallbackResultDiv.style.display = 'block';
                        }
                    }
                });
            });
        });
    </script>
</body>
</html>
