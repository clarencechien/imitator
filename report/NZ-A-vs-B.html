<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>紐西蘭南島行程互動比較儀表板</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Earthy Teal & Sky Blue -->
    <!-- Application Structure Plan: A single-page dashboard designed for decision-making. It starts with a high-level summary and an interactive radar chart for quick visual comparison. A combined interactive map now shows both routes simultaneously with toggles to filter views, and distinguishes flight vs. ground travel. A side-by-side detailed itinerary and a new, highly-detailed checklist table provide granular comparison. The flow guides the user from a broad overview to specific details, ending with a clear recommendation. -->
    <!-- Visualization & Content Choices: Key Metrics (Cards) -> Inform -> HTML/CSS -> Quick overview. Overall Style (Radar Chart) -> Compare -> Chart.js -> Visually represents multi-dimensional strengths. Route (Combined Interactive Map with Toggles) -> Organize/Compare -> Leaflet.js -> Shows geographical flows with clickable details, Chinese labels, a legend, and interactive filtering. Detailed Itinerary (Side-by-side) -> Compare -> HTML/CSS Grid -> Allows direct daily comparison. Attraction Checklist (Detailed Table) -> Compare -> HTML Table (JS generated) -> Quick, scannable feature comparison. Final Advice (Persona Cards) -> Inform -> HTML/CSS -> Gives a clear, actionable conclusion. CONFIRMING NO SVG/Mermaid used. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .nav-link {
            transition: all 0.3s ease;
        }
        .nav-link:hover {
            color: #0284c7;
            transform: translateY(-2px);
        }
        .map-container {
            height: 500px;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .leaflet-tooltip-permanent {
            background: transparent;
            border: none;
            box-shadow: none;
            font-weight: bold;
            font-size: 13px;
            color: #1e293b;
            text-shadow: 0 0 2px #fff, 0 0 2px #fff, 0 0 2px #fff;
        }
        .legend {
            padding: 6px 8px;
            font: 14px/16px Arial, Helvetica, sans-serif;
            background: white;
            background: rgba(255,255,255,0.8);
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
            border-radius: 5px;
        }
        .legend i {
            width: 18px;
            height: 18px;
            float: left;
            margin-right: 8px;
            opacity: 0.9;
        }
        .map-toggle-button {
            transition: all 0.2s ease-in-out;
        }
        .map-toggle-button.active {
            transform: scale(1.05);
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-xl md:text-2xl font-bold text-slate-900">紐西蘭行程抉擇</h1>
            <div class="hidden md:flex space-x-8">
                <a href="#overview" class="nav-link text-slate-600 font-medium">快速總覽</a>
                <a href="#comparison" class="nav-link text-slate-600 font-medium">風格比較</a>
                <a href="#route" class="nav-link text-slate-600 font-medium">路線一覽</a>
                <a href="#details" class="nav-link text-slate-600 font-medium">行程比較</a>
                <a href="#recommendation" class="nav-link text-slate-600 font-medium">最終建議</a>
            </div>
            <div class="md:hidden">
                <select id="mobile-nav" class="bg-white border border-slate-300 rounded-md py-2 px-3 text-slate-700 focus:outline-none focus:ring-2 focus:ring-sky-500">
                    <option value="#overview">快速總覽</option>
                    <option value="#comparison">風格比較</option>
                    <option value="#route">路線一覽</option>
                    <option value="#details">行程比較</option>
                    <option value="#recommendation">最終建議</option>
                </select>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-6 py-12">
        <section id="hero" class="text-center mb-16">
            <h2 class="text-4xl md:text-5xl font-bold text-sky-800 mb-4">紐西蘭南島行程對決</h2>
            <p class="text-lg text-slate-600 max-w-3xl mx-auto">慢遊典藏 vs. 深度環島，哪一個才是您的夢想之旅？透過這個互動儀表板，發掘最適合您的行程。</p>
        </section>

        <section id="overview" class="mb-16 scroll-mt-24">
            <h3 class="text-3xl font-bold text-center mb-10 text-slate-900">關鍵指標・快速總覽</h3>
            <div class="grid md:grid-cols-2 gap-8 max-w-6xl mx-auto">
                <div class="bg-white rounded-xl shadow-lg p-8 border-t-4 border-red-500">
                    <h4 class="text-2xl font-bold text-red-700 mb-4">A: 慢遊典藏・南島精華11天</h4>
                    <p class="text-slate-600 mb-6">專為追求高品質與悠閒步調的旅客設計，聚焦南島核心景區，享受頂級住宿與美食饗宴。</p>
                    <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 text-center">
                        <div class="bg-red-50 p-4 rounded-lg">
                            <div class="text-3xl font-bold text-red-600">11天</div>
                            <div class="text-base text-red-800">旅遊天數</div>
                        </div>
                        <div class="bg-red-50 p-4 rounded-lg">
                            <div class="text-3xl font-bold text-red-600">$19.8萬起</div>
                            <div class="text-base text-red-800">費用(全包)</div>
                        </div>
                        <div class="bg-red-50 p-4 rounded-lg col-span-2 sm:col-span-1">
                            <div class="text-3xl font-bold text-red-600">經典路線</div>
                            <div class="text-base text-red-800">行程風格</div>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-8 border-t-4 border-blue-500">
                    <h4 class="text-2xl font-bold text-blue-700 mb-4">B: 雲之巔・東西合進13天</h4>
                    <p class="text-slate-600 mb-6">一網打盡東西岸的壯麗地貌，體驗多元的獨特活動，適合希望全面探索南島風光的冒險家。</p>
                    <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 text-center">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <div class="text-3xl font-bold text-blue-600">13天</div>
                            <div class="text-base text-blue-800">旅遊天數</div>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <div class="text-3xl font-bold text-blue-600">$18.8萬起</div>
                            <div class="text-base text-blue-800">費用(外加)</div>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg col-span-2 sm:col-span-1">
                            <div class="text-3xl font-bold text-blue-600">環島路線</div>
                            <div class="text-base text-blue-800">行程風格</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="comparison" class="mb-16 scroll-mt-24">
            <h3 class="text-3xl font-bold text-center mb-4 text-slate-900">行程風格・雷達圖比較</h3>
            <p class="text-center text-slate-600 mb-8 max-w-2xl mx-auto">將滑鼠懸停在圖表上，查看各項指標評分。這張圖表能幫助您快速了解兩個行程在不同面向的強弱之處，找到最符合您旅遊偏好的選擇。</p>
            <div class="bg-white rounded-xl shadow-lg p-6 md:p-8">
                <div class="chart-container">
                    <canvas id="tripRadarChart"></canvas>
                </div>
            </div>
        </section>

        <section id="route" class="mb-16 scroll-mt-24">
            <h3 class="text-3xl font-bold text-center mb-10 text-slate-900">路線差異・合併地圖導覽</h3>
            <p class="text-center text-slate-600 mb-8 max-w-3xl mx-auto">透過這張合併的互動地圖，直觀地探索兩個行程的路線。點擊景點標記可查看簡介，不同顏色的線條描繪了旅程的路徑，讓您輕鬆比較。</p>
            <div class="flex justify-center items-center space-x-4 mb-4">
                <button id="toggleA" class="map-toggle-button active bg-red-500 text-white font-bold py-2 px-4 rounded-full shadow-md">顯示行程 A</button>
                <button id="toggleB" class="map-toggle-button active bg-blue-500 text-white font-bold py-2 px-4 rounded-full shadow-md">顯示行程 B</button>
            </div>
            <div id="combinedMap" class="map-container z-10"></div>
        </section>

        <section id="details" class="mb-16 scroll-mt-24">
            <h3 class="text-3xl font-bold text-center mb-4 text-slate-900">每日行程・並排比較</h3>
             <p class="text-center text-slate-600 mb-8 max-w-3xl mx-auto">無需切換，直接左右對照兩個行程的每日詳細安排。這種並排視圖能幫助您快速比較每一天的住宿、餐食與活動亮點。</p>
            <div class="grid lg:grid-cols-2 gap-8 lg:gap-12">
                <div class="bg-white rounded-xl shadow-lg p-6 md:p-8">
                    <h4 class="text-2xl font-bold text-red-700 mb-6 text-center">A: 慢遊典藏</h4>
                    <div id="contentA"></div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6 md:p-8">
                    <h4 class="text-2xl font-bold text-blue-700 mb-6 text-center">B: 深度環島</h4>
                    <div id="contentB"></div>
                </div>
            </div>
        </section>

        <section id="checklist" class="mb-16 scroll-mt-24">
            <h3 class="text-3xl font-bold text-center mb-4 text-slate-900">景點清單・快速檢核</h3>
            <p class="text-center text-slate-600 mb-8 max-w-2xl mx-auto">這個表格快速總結了兩個行程所包含的主要景點。使用此清單來確認您心儀的景點是否包含在行程中。</p>
            <div class="max-w-4xl mx-auto bg-white rounded-xl shadow-lg p-6 md:p-8">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr>
                            <th class="py-3 px-4 bg-slate-100 font-bold text-slate-700 border-b-2 border-slate-200">景點 / 活動</th>
                            <th class="py-3 px-4 bg-slate-100 font-bold text-slate-700 border-b-2 border-slate-200 text-center">行程 A</th>
                            <th class="py-3 px-4 bg-slate-100 font-bold text-slate-700 border-b-2 border-slate-200 text-center">行程 B</th>
                        </tr>
                    </thead>
                    <tbody id="checklistTableBody">
                    </tbody>
                </table>
            </div>
        </section>

        <section id="recommendation" class="scroll-mt-24">
            <h3 class="text-3xl font-bold text-center mb-10 text-slate-900">最終建議・誰適合哪個？</h3>
            <div class="grid md:grid-cols-2 gap-8 max-w-6xl mx-auto">
                <div class="bg-white rounded-xl shadow-lg p-8 text-center transform hover:scale-105 transition-transform duration-300">
                    <div class="text-6xl mb-4">🥂</div>
                    <h4 class="text-2xl font-bold text-red-700 mb-3">推薦選擇 A 行程</h4>
                    <p class="text-slate-600 mb-4">如果您是...</p>
                    <ul class="space-y-2 text-left mx-auto max-w-xs">
                        <li class="flex items-center"><span class="text-red-500 mr-3">✔</span>追求極致舒適與放鬆</li>
                        <li class="flex items-center"><span class="text-red-500 mr-3">✔</span>重視頂級住宿品質</li>
                        <li class="flex items-center"><span class="text-red-500 mr-3">✔</span>偏好經典核心景區</li>
                        <li class="flex items-center"><span class="text-red-500 mr-3">✔</span>希望有更多自由時間</li>
                    </ul>
                    <p class="mt-6 font-semibold bg-red-50 text-red-800 rounded-full py-2 px-4">適合蜜月旅行、家庭休閒遊</p>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-8 text-center transform hover:scale-105 transition-transform duration-300">
                    <div class="text-6xl mb-4">🗺️</div>
                    <h4 class="text-2xl font-bold text-blue-700 mb-3">推薦選擇 B 行程</h4>
                    <p class="text-slate-600 mb-4">如果您是...</p>
                    <ul class="space-y-2 text-left mx-auto max-w-xs">
                        <li class="flex items-center"><span class="text-blue-500 mr-3">✔</span>想看遍南島多樣風貌</li>
                        <li class="flex items-center"><span class="text-blue-500 mr-3">✔</span>熱愛獨特的體驗活動</li>
                        <li class="flex items-center"><span class="text-blue-500 mr-3">✔</span>不介意較緊湊的節奏</li>
                        <li class="flex items-center"><span class="text-blue-500 mr-3">✔</span>攝影愛好者或地理迷</li>
                    </ul>
                    <p class="mt-6 font-semibold bg-blue-50 text-blue-800 rounded-full py-2 px-4">適合體力充沛、喜歡探索的旅人</p>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-slate-800 text-slate-300 mt-16">
        <div class="container mx-auto px-6 py-8 text-center">
            <p>&copy; 2024 紐西蘭行程互動比較儀表板. 僅為範例展示用途。</p>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const tripData = {
            radar: {
                labels: ['悠閒度', '景觀豐富度', '奢華享受', '活動多元性', '行程自由度'],
                datasets: [{
                    label: 'A: 慢遊典藏',
                    data: [9, 7, 9, 6, 8],
                    backgroundColor: 'rgba(239, 68, 68, 0.2)',
                    borderColor: 'rgba(220, 38, 38, 1)',
                    pointBackgroundColor: 'rgba(220, 38, 38, 1)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgba(220, 38, 38, 1)'
                }, {
                    label: 'B: 深度環島',
                    data: [6, 10, 7, 9, 5],
                    backgroundColor: 'rgba(59, 130, 246, 0.2)',
                    borderColor: 'rgba(37, 99, 235, 1)',
                    pointBackgroundColor: 'rgba(37, 99, 235, 1)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgba(37, 99, 235, 1)'
                }]
            },
            locations: {
                AKL: { name: '奧克蘭', lat: -36.8485, lng: 174.7633, desc: '紐西蘭第一大城，國際航班主要進出點。' },
                A: [
                    { name: '基督城', lat: -43.5321, lng: 172.6362, desc: '南島第一大城，有「花園城市」美譽。' },
                    { name: '蒂卡波湖', lat: -44.0065, lng: 170.4771, desc: '不可思議的土耳其藍湖水，湖畔有著名的牧羊人教堂。' },
                    { name: '庫克山', lat: -43.7343, lng: 170.0962, desc: '紐西蘭第一高峰，入住國寶級隱士飯店所在地。' },
                    { name: '瓦納卡', lat: -44.6972, lng: 169.1558, desc: '寧靜的湖畔小鎮，以湖中孤樹聞名。' },
                    { name: '箭鎮', lat: -44.9420, lng: 168.8340, desc: '充滿19世紀淘金時期風情的古色古香小鎮。' },
                    { name: '蒂阿瑙', lat: -45.4146, lng: 167.7165, desc: '前往峽灣地區的門戶，擁有奇幻的螢火蟲洞。' },
                    { name: '米佛峽灣', lat: -44.6719, lng: 167.9256, desc: '世界級的自然奇景，被譽為「世界第八大奇蹟」。' },
                    { name: '皇后鎮', lat: -45.0312, lng: 168.6626, desc: '世界級的冒險天堂，被群山環抱的湖畔貴婦。' }
                ],
                B: [
                    { name: '基督城', lat: -43.5321, lng: 172.6362, desc: '南島第一大城，有「花園城市」美譽。' },
                    { name: '格雷茅斯', lat: -42.4500, lng: 171.2000, desc: '西海岸最大城鎮，高山火車的終點站。' },
                    { name: '法蘭茲冰河', lat: -43.4667, lng: 170.1833, desc: '可近距離健行觀賞的壯麗冰河景觀。' },
                    { name: '瓦納卡', lat: -44.6972, lng: 169.1558, desc: '寧靜的湖畔小鎮，以湖中孤樹聞名。' },
                    { name: '皇后鎮', lat: -45.0312, lng: 168.6626, desc: '世界級的冒險天堂，被群山環抱的湖畔貴婦。' },
                    { name: '米佛峽灣', lat: -44.6719, lng: 167.9256, desc: '世界級的自然奇景，被譽為「世界第八大奇蹟」。' },
                    { name: '蒂阿瑙', lat: -45.4146, lng: 167.7165, desc: '前往峽灣地區的門戶，擁有奇幻的螢火蟲洞。' },
                    { name: '但尼丁', lat: -45.8788, lng: 170.5028, desc: '充滿蘇格蘭風情的「南方愛丁堡」。' },
                    { name: '庫克山', lat: -43.7343, lng: 170.0962, desc: '紐西蘭第一高峰，入住國寶級隱士飯店所在地。' },
                    { name: '蒂卡波湖', lat: -44.0065, lng: 170.4771, desc: '不可思議的土耳其藍湖水，湖畔有著名的牧羊人教堂。' },
                    { name: '阿卡羅瓦', lat: -43.8039, lng: 172.9697, desc: '充滿法國風情的港口小鎮，紐西蘭唯一的法國移民地。' }
                ]
            },
            checklist: [
                { category: '核心景區', name: '基督城市區', inA: true, inB: true },
                { category: '核心景區', name: '蒂卡波湖 & 牧羊人教堂', inA: true, inB: true },
                { category: '核心景區', name: '庫克山國家公園', inA: true, inB: true },
                { category: '核心景區', name: '瓦納卡湖區', inA: true, inB: true },
                { category: '核心景區', name: '箭鎮', inA: true, inB: true },
                { category: '核心景區', name: '皇后鎮', inA: true, inB: true },
                { category: '核心景區', name: '蒂阿瑙', inA: true, inB: true },
                { category: '核心景區', name: '米佛峽灣', inA: true, inB: true },
                { category: 'B行程獨特景區', name: '西海岸 (格雷茅斯/冰河)', inA: false, inB: true },
                { category: 'B行程獨特景區', name: '東南岸 (但尼丁/奧瑪魯)', inA: false, inB: true },
                { category: 'B行程獨特景區', name: '阿卡羅瓦 (法式小鎮)', inA: false, inB: true },
                { category: '特色體驗', name: '塔斯曼冰河船', inA: true, inB: true },
                { category: '特色體驗', name: '螢火蟲洞', inA: true, inB: true },
                { category: '特色體驗', name: 'TSS恩斯羅號蒸汽船 & 牧場', inA: true, inB: true },
                { category: '特色體驗', name: '皇后鎮天際纜車', inA: true, inB: true },
                { category: '特色體驗', name: '高山景觀火車', inA: false, inB: true },
                { category: '特色體驗', name: '千層石岩', inA: false, inB: true },
                { category: '特色體驗', name: '西海岸樹冠步道', inA: false, inB: true },
                { category: '特色體驗', 'name': '摩洛奇龍珠石', inA: false, inB: true },
                { category: '特色體驗', 'name': '羊駝牧場', inA: false, inB: true },
                { category: '特色體驗', 'name': '高山越野環湖農場 Safari', inA: true, inB: false },
                { category: '特色體驗', 'name': 'Luge 溜溜車', inA: true, inB: false },
                { category: '特色體驗', 'name': '奧克蘭帆船體驗', inA: true, inB: false },
                { category: '餐食亮點', name: '隱士飯店自助餐', inA: true, inB: true },
                { category: '餐食亮點', name: '皇后鎮山頂纜車自助餐', inA: true, inB: true },
                { category: '餐食亮點', name: '瓦特峰高地農莊 BBQ', inA: true, inB: true },
                { category: '餐食亮點', name: '奧克蘭天空塔旋轉餐廳', inA: true, inB: true },
                { category: '餐食亮點', name: '峽灣龍蝦餐', inA: false, inB: true },
                { category: '餐食亮點', name: '啤酒廠風味料理', inA: false, inB: true },
                { category: '餐食亮點', name: '酒莊餐酒搭配', inA: true, inB: false },
                { category: '餐食亮點', name: 'Fergburger 大漢堡', inA: true, inB: false },
                { category: '行程彈性', name: '皇后鎮「全日」自由活動', inA: true, inB: false },
                { category: '行程彈性', name: '皇后鎮「半日」自由活動', inA: false, inB: true }
            ],
            detailsA: `
                <ul class="space-y-6 text-slate-700 text-base">
                    <li><strong>第一天：台北 → 奧克蘭</strong><br>搭乘紐西蘭航空豪華客機直飛，夜宿機上。</li>
                    <li><strong>第二天：奧克蘭 → 基督城</strong><br>抵達後轉機至基督城，安排★雅芳河輕舟撐篙之旅。<br><em>晚餐：飯店內西式料理</em><br><em>住宿：Crowne Plaza Christchurch 或同級</em></li>
                    <li><strong>第三天：基督城 → 蒂卡波湖 → 庫克山</strong><br>前往蒂卡波湖欣賞牧羊人教堂，後深入庫克山國家公園，安排★虎克山谷步道輕健行(1小時)。<br><em>午餐：輕食料理</em><br><em>晚餐：隱士飯店景觀餐廳自助餐(佐酒)</em><br><em>住宿：The Hermitage Aoraki Mount Cook (保證面庫克山房)</em></li>
                    <li><strong>第四天：庫克山 → 瓦納卡</strong><br>上午參加★塔斯曼冰河船之旅，近距離接觸冰山。途經普卡基湖。<br><em>晚餐：飯店內西式料理</em><br><em>住宿：Edgewater Resort (連泊2晚)</em></li>
                    <li><strong>第五天：瓦納卡</strong><br>上午自由活動。下午安排★高山越野環湖農場Safari之旅，含戶外下午茶。<br><em>晚餐：中式海鮮料理(佐白葡萄酒)</em><br><em>住宿：Edgewater Resort</em></li>
                    <li><strong>第六天：瓦納卡 → 箭鎮 → 蒂阿瑙</strong><br>途經克倫威爾水果小鎮、卡瓦勞吊橋。傍晚抵達蒂阿瑙，晚上參加★螢火蟲生態之旅。<br><em>午餐：酒莊餐廳餐酒搭配</em><br><em>晚餐：飯店內西式料理或自助餐</em><br><em>住宿：Distinction Luxmore Te Anau Hotel 或同級</em></li>
                    <li><strong>第七天：蒂阿瑙 → 米佛峽灣 → 皇后鎮</strong><br>行經米佛景觀大道，搭乘★米佛峽灣遊船。<br><em>午餐：峽灣遊船日式餐盒</em><br><em>晚餐：西式料理</em><br><em>住宿：Crowne Plaza Queenstown 或同級 (連泊3晚)</em></li>
                    <li><strong>第八天：皇后鎮</strong><br>上午皇后鎮花園輕健行。搭乘★天際纜車+Luge溜溜車，下午搭乘★TSS恩斯羅號古董蒸汽船前往★瓦特峰高地農莊。<br><em>午餐：瓦特峰高地農莊BBQ燒烤</em><br><em>晚餐：包伯峰山頂豪華自助餐</em><br><em>住宿：同前一日</em></li>
                    <li><strong>第九天：皇后鎮全日自由活動</strong><br>享受無晨喚的悠閒時光，盡情探索冒險之都。<br>
                        <div class="mt-2 pl-4 border-l-2 border-slate-200">
                            <p class="text-sm font-bold text-slate-500">✧ 可選自費活動：</p>
                            <ul class="list-disc list-inside text-sm text-slate-500">
                                <li>高空彈跳 (Bungy Jump)</li>
                                <li>噴射快艇 (Shotover Jet)</li>
                                <li>高空跳傘 (Skydive)</li>
                                <li>熱氣球、滑翔傘</li>
                                <li>庫克山或史都華島一日遊</li>
                            </ul>
                        </div>
                    <em>晚餐：特別安排Fergburger著名大漢堡</em><br><em>住宿：同前一日</em></li>
                    <li><strong>第十天：皇后鎮 → 奧克蘭</strong><br>上午搭機飛往奧克蘭。安排★乘帆遊奧克蘭港灣。<br><em>晚餐：Orbit 360°天空塔旋轉餐廳西式套餐</em><br><em>住宿：Crowne Plaza Auckland 或同級</em></li>
                    <li><strong>第十一天：奧克蘭 → 台北</strong><br>整理行囊，前往機場搭機返回溫暖的家。</li>
                </ul>
            `,
            detailsB: `
                <ul class="space-y-6 text-slate-700 text-base">
                    <li><strong>第一天：桃園 → 奧克蘭</strong><br>搭乘紐西蘭航空豪華客機直飛，夜宿機上。</li>
                    <li><strong>第二天：奧克蘭 → 基督城</strong><br>抵達後轉機至基督城，市區觀光包含★亞芳河撐篙船、New Regent Street、河岸市集。<br><em>午餐：退餐費N$40自理</em><br><em>晚餐：館長之家西班牙風味料理</em><br><em>住宿：Sudima Hotel (City) 或同級</em></li>
                    <li><strong>第三天：基督城 → 格雷茅斯</strong><br>搭乘★南阿爾卑斯高山景觀火車，穿越亞瑟隘口國家公園。下午參觀★千層石岩，傍晚參加★啤酒廠微醺導覽。<br><em>午餐：印度風味料理</em><br><em>晚餐：海港啤酒廠風味料理</em><br><em>住宿：Copthrone Hotel Greymouth 或同級</em></li>
                    <li><strong>第四天：格雷茅斯 → 法蘭茲約瑟夫冰河</strong><br>前往霍奇蒂卡，體驗★西海岸樹冠探索空中步道，下午進行★探訪冰河谷遺跡健行。<br><em>午餐：紐西蘭鄉村風味料理</em><br><em>晚餐：冰河飯店主廚推薦三道式料理</em><br><em>住宿：Te Waonui Forest Retreat 或同級</em></li>
                    <li><strong>第五天：冰河區 → 瓦納卡</strong><br>清晨前往馬松森湖健行，拜訪★瑞本酒莊品酒。下午參觀★瓦卡納迷宮世界與湖中之樹。<br><em>午餐：酒莊餐廳或橡木桶風味餐</em><br><em>晚餐：飯店主廚推薦料理</em><br><em>住宿：Edgewater Hotel Lake Wanaka 或同級</em></li>
                    <li><strong>第六天：瓦納卡 → 皇后鎮</strong><br>途經高空彈跳發源地，漫步箭鎮。抵達皇后鎮後搭乘★TSS恩斯洛號古董蒸汽船及★華特峰高原牧場。<br><em>午餐：華特峰牧場湖畔B.B.Q.風味餐</em><br><em>晚餐：全球十大景觀餐廳自助餐(SKYLINE)</em><br><em>住宿：Hilton Queenstown Resort & Spa 或同級</em></li>
                    <li><strong>第七天：皇后鎮 (魔戒小鎮)</strong><br>前往格萊諾基(魔戒小鎮)與潟湖步道。下午為皇后鎮自由活動時間。<br>
                        <div class="mt-2 pl-4 border-l-2 border-slate-200">
                            <p class="text-sm font-bold text-slate-500">✧ 可選自費活動：</p>
                            <ul class="list-disc list-inside text-sm text-slate-500">
                                <li>高空彈跳 (Bungy Jump)</li>
                                <li>噴射快艇 (Shotover Jet)</li>
                            </ul>
                        </div>
                    <em>晚餐：全球知名網站卓越獎得獎餐廳</em><br><em>住宿：同前一日</em></li>
                    <li><strong>第八天：皇后鎮 → 蒂阿瑙</strong><br>前往米佛峽灣搭乘★峽灣遊船。傍晚返回蒂阿瑙，參加★活性鐘乳石洞與螢火蟲生態之旅。<br><em>午餐：峽灣遊船自助餐</em><br><em>晚餐：中式料理七菜一湯(含峽灣龍蝦每人半隻)</em><br><em>住宿：Distinction Luxmore hotel 或同級</em></li>
                    <li><strong>第九天：蒂阿瑙 → 但尼丁</strong><br>參觀Shoes Fence臭鞋牆，探訪隧道海灘。抵達但尼丁後市區觀光(八角廣場、火車站、世界最陡街道等)。<br><em>午餐：中式料理七菜一湯</em><br><em>晚餐：第一酒廠風味料理(含啤酒)</em><br><em>住宿：Scenic Hotel Southern Cross 或同級</em></li>
                    <li><strong>第十天：但尼丁 → 庫克山</strong><br>前往摩洛奇龍珠石，參觀奧瑪魯白砂岩之城。下午進入庫克山國家公園。<br><em>午餐：8號公路特色餐廳</em><br><em>晚餐：隱士飯店內景觀餐廳自助餐</em><br><em>住宿：HERMITAGE HOTEL (保證入住面山房)</em></li>
                    <li><strong>第十一天：庫克山 → 基督城</strong><br>上午參加★塔斯曼冰河船之旅。後前往蒂卡波湖參觀牧羊人教堂。<br><em>午餐：湖畔得獎餐廳頂級日式定食</em><br><em>晚餐：中式精緻料理+海鮮盤</em><br><em>住宿：Sudima Hotel (City) 或同級</em></li>
                    <li><strong>第十二天：基督城 → 奧克蘭</strong><br>前往阿卡羅瓦(法式小鎮)，參觀★羊駝牧場。傍晚搭機返回奧克蘭。<br><em>午餐：紐西蘭網紅名店-英式風味餐</em><br><em>晚餐：360°天空塔旋轉餐廳</em><br><em>住宿：Pullman Auckland Hotel 或同級</em></li>
                    <li><strong>第十三天：奧克蘭 → 桃園</strong><br>上午前往機場，搭機返回台灣。</li>
                </ul>
            `
        };

        const ctx = document.getElementById('tripRadarChart').getContext('2d');
        new Chart(ctx, {
            type: 'radar',
            data: tripData.radar,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: { color: 'rgba(0, 0, 0, 0.1)' },
                        grid: { color: 'rgba(0, 0, 0, 0.1)' },
                        pointLabels: { font: { size: 14 }, color: '#334155' },
                        ticks: {
                            backdropColor: 'rgba(255, 255, 255, 0.75)',
                            stepSize: 2,
                            color: '#64748b'
                        },
                        suggestedMin: 0,
                        suggestedMax: 10
                    }
                },
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            font: { size: 14 },
                            color: '#1e293b'
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed.r !== null) {
                                    label += context.parsed.r + '分';
                                }
                                return label;
                            }
                        }
                    }
                }
            }
        });
        
        const map = L.map('combinedMap').setView([-44.5, 170], 5);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        const layerA = L.layerGroup();
        const layerB = L.layerGroup();

        const akl = tripData.locations.AKL;
        const chc = tripData.locations.A.find(loc => loc.name === '基督城');
        const zqn = tripData.locations.A.find(loc => loc.name === '皇后鎮');

        function createTripLayers(tripLocations, color, layerGroup) {
            const latLngs = [];
            tripLocations.forEach(loc => {
                const marker = L.circleMarker([loc.lat, loc.lng], {
                    color: color, fillColor: color, fillOpacity: 0.8, radius: 8
                });
                marker.bindPopup(`<b>${loc.name}</b><br>${loc.desc}`);
                marker.bindTooltip(loc.name, {
                    permanent: true, direction: 'right', offset: [10, 0], className: 'leaflet-tooltip-permanent'
                });
                layerGroup.addLayer(marker);
                latLngs.push([loc.lat, loc.lng]);
            });
            L.polyline(latLngs, { color: color, weight: 3, opacity: 0.7 }).addTo(layerGroup);
        }

        createTripLayers(tripData.locations.A, '#DC2626', layerA);
        createTripLayers(tripData.locations.B, '#2563EB', layerB);
        
        L.polyline([[akl.lat, akl.lng], [chc.lat, chc.lng]], { color: '#DC2626', weight: 2, opacity: 0.8, dashArray: '5, 10' }).addTo(layerA);
        L.polyline([[zqn.lat, zqn.lng], [akl.lat, akl.lng]], { color: '#DC2626', weight: 2, opacity: 0.8, dashArray: '5, 10' }).addTo(layerA);
        
        L.polyline([[akl.lat, akl.lng], [chc.lat, chc.lng]], { color: '#2563EB', weight: 2, opacity: 0.8, dashArray: '5, 10' }).addTo(layerB);
        L.polyline([[chc.lat, chc.lng], [akl.lat, akl.lng]], { color: '#2563EB', weight: 2, opacity: 0.8, dashArray: '5, 10' }).addTo(layerB);
        
        const aklMarker = L.circleMarker([akl.lat, akl.lng], { color: '#4b5563', fillColor: '#f9fafb', fillOpacity: 0.8, radius: 8 });
        aklMarker.bindPopup(`<b>${akl.name}</b><br>${akl.desc}`);
        aklMarker.bindTooltip(akl.name, { permanent: true, direction: 'right', offset: [10, 0], className: 'leaflet-tooltip-permanent' });
        aklMarker.addTo(map);

        layerA.addTo(map);
        layerB.addTo(map);

        const legend = L.control({position: 'bottomright'});
        legend.onAdd = function (map) {
            const div = L.DomUtil.create('div', 'info legend');
            const labels = [
                '<i style="background: #DC2626"></i> 行程 A: 慢遊典藏',
                '<i style="background: #2563EB"></i> 行程 B: 深度環島'
            ];
            div.innerHTML = labels.join('<br>');
            return div;
        };
        legend.addTo(map);

        const allLatLngs = [...tripData.locations.A.map(l => [l.lat, l.lng]), ...tripData.locations.B.map(l => [l.lat, l.lng]), [akl.lat, akl.lng]];
        if (allLatLngs.length > 0) {
            map.fitBounds(L.latLngBounds(allLatLngs).pad(0.1));
        }

        const toggleA = document.getElementById('toggleA');
        const toggleB = document.getElementById('toggleB');
        toggleA.addEventListener('click', () => {
            toggleA.classList.toggle('active');
            toggleA.style.backgroundColor = toggleA.classList.contains('active') ? '#ef4444' : '#9ca3af';
            if (map.hasLayer(layerA)) {
                map.removeLayer(layerA);
            } else {
                map.addLayer(layerA);
            }
        });
        toggleB.addEventListener('click', () => {
            toggleB.classList.toggle('active');
            toggleB.style.backgroundColor = toggleB.classList.contains('active') ? '#3b82f6' : '#9ca3af';
            if (map.hasLayer(layerB)) {
                map.removeLayer(layerB);
            } else {
                map.addLayer(layerB);
            }
        });

        document.getElementById('contentA').innerHTML = tripData.detailsA;
        document.getElementById('contentB').innerHTML = tripData.detailsB;

        const checklistTableBody = document.getElementById('checklistTableBody');
        let currentCategory = "";
        tripData.checklist.forEach(item => {
            if (item.category !== currentCategory) {
                currentCategory = item.category;
                const categoryRow = `
                    <tr class="bg-slate-50">
                        <td colspan="3" class="pt-6 pb-2 px-4 text-slate-600 font-semibold text-base">${currentCategory}</td>
                    </tr>
                `;
                checklistTableBody.innerHTML += categoryRow;
            }
            const row = `
                <tr class="border-b border-slate-200 hover:bg-slate-50">
                    <td class="py-3 px-4 text-slate-800 font-medium">${item.name}</td>
                    <td class="py-3 px-4 text-center text-lg font-bold text-red-500">${item.inA ? '✔' : '-'}</td>
                    <td class="py-3 px-4 text-center text-lg font-bold text-blue-500">${item.inB ? '✔' : '-'}</td>
                </tr>
            `;
            checklistTableBody.innerHTML += row;
        });

        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
        
        document.getElementById('mobile-nav').addEventListener('change', function(e) {
            const targetId = e.target.value;
            document.querySelector(targetId).scrollIntoView({ behavior: 'smooth' });
        });
    });
    </script>
</body>
</html>
