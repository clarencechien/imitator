<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grafana 核心概念互動導覽</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Tech -->
    <!-- Application Structure Plan: The application transforms the linear presentation transcript into a thematic, multi-section single-page application. The structure is designed for non-linear exploration, allowing users to jump to concepts of interest. The key sections are: 1. Introduction, 2. The concept of Observability (using a visual Black Box vs. Glass Box analogy and interactive cards for the pillars), 3. The Grafana LGTM Stack (explained via an interactive diagram), 4. The "Big Tent" Philosophy (visualized), 5. A simulated, interactive Demo section with tabs for two key scenarios from the presentation, and 6. Learning Resources. This structure was chosen to break down complex topics into digestible, interactive modules, prioritizing user engagement and understanding over the original chronological flow. -->
    <!-- Visualization & Content Choices: Report Info: Pillars of Observability -> Goal: Inform/Organize -> Viz: 4-column interactive cards -> Interaction: Hover effects to highlight -> Justification: More scannable and engaging than a wall of text. | Report Info: LGTM Stack components -> Goal: Organize/Inform -> Viz: Central diagram with clickable nodes -> Interaction: Click to reveal component details -> Justification: Encourages exploration. | Report Info: E-commerce troubleshooting demo -> Goal: Demonstrate a process -> Viz: Simulated dashboard with Chart.js line chart and HTML/CSS trace/log views -> Interaction: Buttons to step through the Metrics -> Traces -> Logs workflow -> Justification: Makes the abstract concept of signal correlation tangible and easy to follow. | Report Info: Game data dashboard demo -> Goal: Demonstrate dashboard capabilities -> Viz: Stat panel and Chart.js bar chart -> Interaction: Faux filters to simulate interactivity -> Justification: Shows the end-product of data visualization in Grafana in a fun context. All diagrams are built with HTML/Tailwind. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #F8F5F2;
            color: #2c3e50;
        }
        .nav-link {
            transition: color 0.3s ease, border-bottom-color 0.3s ease;
            border-bottom: 2px solid transparent;
        }
        .nav-link:hover, .nav-link.active {
            color: #3498db;
            border-bottom-color: #3498db;
        }
        .section-title {
            color: #2c3e50;
        }
        .card {
            background-color: #ffffff;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
        .btn-primary {
            background-color: #3498db;
            color: white;
            transition: background-color 0.3s ease;
        }
        .btn-primary:hover {
            background-color: #2980b9;
        }
        .btn-secondary {
            background-color: #f39c12;
            color: white;
            transition: background-color 0.3s ease;
        }
        .btn-secondary:hover {
            background-color: #e67e22;
        }
        .tab-btn {
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        .tab-btn.active {
            color: #3498db;
            border-bottom-color: #3498db;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 50vh;
        }
        .lgtm-node {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .lgtm-node:hover {
            transform: scale(1.05);
            filter: drop-shadow(0 0 10px rgba(52, 152, 219, 0.7));
        }
        .lgtm-node.active {
             transform: scale(1.1);
             background-color: #3498db;
             color: white;
        }
        .lgtm-line {
            position: absolute;
            background-color: #d1d5db;
            z-index: 0;
        }
    </style>
</head>
<body class="antialiased">

    <header id="header" class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="text-2xl font-bold text-[#2c3e50]">
                Grafana<span class="text-[#3498db]">導覽</span>
            </div>
            <div class="hidden md:flex space-x-8">
                <a href="#observability" class="nav-link text-gray-600 font-medium pb-1">什麼是可觀測性?</a>
                <a href="#lgtm-stack" class="nav-link text-gray-600 font-medium pb-1">LGTM 技術棧</a>
                <a href="#philosophy" class="nav-link text-gray-600 font-medium pb-1">核心理念</a>
                <a href="#capabilities" class="nav-link text-gray-600 font-medium pb-1">核心功能</a>
                <a href="#demo" class="nav-link text-gray-600 font-medium pb-1">實戰演練</a>
                <a href="#resources" class="nav-link text-gray-600 font-medium pb-1">學習資源</a>
            </div>
            <div class="md:hidden">
                <button id="mobile-menu-button" class="text-gray-600 focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4">
            <a href="#observability" class="block py-2 text-gray-600">什麼是可觀測性?</a>
            <a href="#lgtm-stack" class="block py-2 text-gray-600">LGTM 技術棧</a>
            <a href="#philosophy" class="block py-2 text-gray-600">核心理念</a>
            <a href="#capabilities" class="block py-2 text-gray-600">核心功能</a>
            <a href="#demo" class="block py-2 text-gray-600">實戰演練</a>
            <a href="#resources" class="block py-2 text-gray-600">學習資源</a>
        </div>
    </header>

    <main>
        <section id="hero" class="py-20 bg-white">
            <div class="container mx-auto px-6 text-center">
                <h1 class="text-4xl md:text-5xl font-bold section-title mb-4 leading-tight">探索 Grafana 的可觀測性世界</h1>
                <p class="text-lg text-gray-600 max-w-3xl mx-auto">這份互動指南將演講內容轉化為易於理解的模組。讓我們一起揭開現代複雜系統的神秘面紗，了解 Grafana 如何將資料轉化為清晰的洞察。</p>
            </div>
        </section>

        <section id="observability" class="py-20">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold section-title">什麼是可觀測性?</h2>
                    <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">在現代微服務架構中，系統變得越來越複雜。可觀測性讓我們有能力從外部輸出來推斷系統內部狀態，不再是盲目猜測。</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center mb-16">
                    <div class="text-center p-8 border-2 border-dashed border-gray-300 rounded-lg">
                        <h3 class="text-2xl font-bold mb-2">黑盒子系統</h3>
                        <div class="text-5xl mb-4">⬛️</div>
                        <p class="text-gray-600">請求進去，回應出來，但內部發生了什麼？完全是個謎。當問題發生時，就像一場懸疑的兇殺案，難以追查。</p>
                    </div>
                    <div class="text-center p-8 border-2 border-dashed border-blue-300 rounded-lg bg-blue-50">
                        <h3 class="text-2xl font-bold text-blue-800 mb-2">透明玻璃盒</h3>
                        <div class="text-5xl mb-4">💎</div>
                        <p class="text-blue-700">有了可觀測性，我們彷彿擁有了X光般的視野。能夠在問題擴大前找到並修復它們，確保系統的健康與穩定。</p>
                    </div>
                </div>

                <h3 class="text-2xl font-bold text-center mb-8">可觀測性的四大支柱</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div class="card p-6 text-center">
                        <div class="text-4xl mb-4">📊</div>
                        <h4 class="text-xl font-bold mb-2">指標 (Metrics)</h4>
                        <p class="font-semibold text-[#3498db] mb-2">回答：「有事情發生嗎？」</p>
                        <p class="text-gray-600">以數字形式呈現的測量值，例如 CPU 使用率、請求數量。它們是系統健康狀況的脈搏。</p>
                    </div>
                    <div class="card p-6 text-center">
                        <div class="text-4xl mb-4">📜</div>
                        <h4 class="text-xl font-bold mb-2">日誌 (Logs)</h4>
                        <p class="font-semibold text-[#3498db] mb-2">回答：「發生了什麼事？」</p>
                        <p class="text-gray-600">帶有時間戳的事件紀錄。當指標顯示異常時，日誌能提供詳細的上下文和錯誤訊息。</p>
                    </div>
                    <div class="card p-6 text-center">
                        <div class="text-4xl mb-4">🔗</div>
                        <h4 class="text-xl font-bold mb-2">追蹤 (Traces)</h4>
                        <p class="font-semibold text-[#3498db] mb-2">回答：「問題發生在哪裡？」</p>
                        <p class="text-gray-600">記錄單一請求在多個服務間的完整路徑，幫助我們精準定位效能瓶頸和錯誤源頭。</p>
                    </div>
                     <div class="card p-6 text-center">
                        <div class="text-4xl mb-4">🔬</div>
                        <h4 class="text-xl font-bold mb-2">剖析 (Profiles)</h4>
                        <p class="font-semibold text-[#3498db] mb-2">回答：「該如何修復問題？」</p>
                        <p class="text-gray-600">深入程式碼層級，分析 CPU 和記憶體等資源的消耗情況，找出效能問題的根本原因。</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="lgtm-stack" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold section-title">Grafana LGTM 技術棧</h2>
                    <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">LGTM 技術棧是 Grafana 提供的開源、可組合的解決方案，分別對應可觀測性的核心支柱，並以 Grafana 作為統一的視覺化介面。</p>
                </div>
                
                <div class="flex flex-col lg:flex-row gap-8 items-center">
                    <div class="w-full lg:w-1/2 relative flex justify-center items-center h-96">
                        <div class="lgtm-line" style="left: 50%; top: calc(50% - 8rem); width: 2px; height: 4rem; transform: translateX(-50%);"></div>
                        <div class="lgtm-line" style="left: 50%; bottom: calc(50% - 8rem); width: 2px; height: 4rem; transform: translateX(-50%);"></div>
                        <div class="lgtm-line" style="top: 50%; left: calc(50% - 8rem); height: 2px; width: 4rem; transform: translateY(-50%);"></div>
                        
                        <div id="lgtm-center" class="w-36 h-36 rounded-full bg-[#f39c12] flex items-center justify-center text-white font-bold text-2xl shadow-lg z-10 text-center p-2">Grafana<br><span class="text-sm font-normal">(視覺化介面)</span></div>
                        
                        <div id="loki-node" class="lgtm-node absolute w-28 h-28 rounded-full bg-gray-200 flex items-center justify-center font-bold shadow-md text-center p-2 z-10" style="top: 0; left: 50%; transform: translate(-50%, -10%);">Loki<br><span class="text-xs font-normal">(日誌)</span></div>
                        <div id="tempo-node" class="lgtm-node absolute w-28 h-28 rounded-full bg-gray-200 flex items-center justify-center font-bold shadow-md text-center p-2 z-10" style="bottom: 0; left: 50%; transform: translate(-50%, 10%);">Tempo<br><span class="text-xs font-normal">(追蹤)</span></div>
                        <div id="mimir-node" class="lgtm-node absolute w-28 h-28 rounded-full bg-gray-200 flex items-center justify-center font-bold shadow-md text-center p-2 z-10" style="left: 0; top: 50%; transform: translate(-10%, -50%);">Mimir<br><span class="text-xs font-normal">(指標)</span></div>
                    </div>

                    <div class="w-full lg:w-1/2">
                        <div id="lgtm-details" class="card p-8 min-h-[24rem] flex flex-col justify-center">
                            <h3 id="lgtm-title" class="text-2xl font-bold mb-4">點擊左側節點查看詳情</h3>
                            <p id="lgtm-description" class="text-gray-600">Grafana LGTM 技術棧提供了一套完整且高效的工具，幫助您收集、儲存和分析所有可觀測性資料。</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="philosophy" class="py-20">
             <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold section-title">核心理念：「Big Tent」大帳篷</h2>
                    <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">Grafana 的核心哲學是開放與整合。我們不強迫您更換現有的工具鏈，而是提供一個統一的平台，讓您的所有資料都能在此交會，無論它們身在何處。</p>
                </div>
                <div class="card p-8">
                    <div class="flex flex-col md:flex-row items-center justify-center gap-8">
                        <div class="flex-shrink-0 text-center">
                             <div class="grid grid-cols-2 gap-4">
                                <div class="p-4 bg-gray-100 rounded-lg">
                                    <span class="text-2xl">💾</span>
                                    <p class="font-semibold">Prometheus</p>
                                </div>
                                <div class="p-4 bg-gray-100 rounded-lg">
                                    <span class="text-2xl">🔍</span>
                                    <p class="font-semibold">Elasticsearch</p>
                                </div>
                                 <div class="p-4 bg-gray-100 rounded-lg">
                                    <span class="text-2xl">☁️</span>
                                    <p class="font-semibold">CloudWatch</p>
                                </div>
                                <div class="p-4 bg-gray-100 rounded-lg">
                                    <span class="text-2xl">🗄️</span>
                                    <p class="font-semibold">SQL Databases</p>
                                </div>
                            </div>
                            <p class="text-sm text-gray-500 mt-2">以及其他數百種資料來源...</p>
                        </div>
                        <div class="text-5xl text-gray-400 font-thin mx-8">→</div>
                         <div class="text-center">
                            <div class="text-6xl mb-4">⛺️</div>
                            <h3 class="text-2xl font-bold">Grafana 統一介面</h3>
                            <p class="text-gray-600">連接數百種資料來源，無需資料遷移或被供應商鎖定。</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="capabilities" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold section-title">超越 LGTM：Grafana 核心功能</h2>
                    <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">除了強大的資料後端，Grafana 本身也內建了許多進階功能，幫助您打造更智慧、更自動化的可觀測性工作流程。</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="card p-6">
                        <div class="text-4xl mb-3">🤖</div>
                        <h3 class="text-xl font-bold mb-2">AI/ML 洞察</h3>
                        <p class="text-gray-600">利用機器學習預測趨勢、偵測異常，並透過 AI 助理（Grafana Assistant）協助您建立儀表板和撰寫查詢。</p>
                    </div>
                    <div class="card p-6">
                        <div class="text-4xl mb-3">🚨</div>
                        <h3 class="text-xl font-bold mb-2">統一警報系統</h3>
                        <p class="text-gray-600">在單一介面中管理來自多種資料來源的警報規則，並透過 Email, Slack, PagerDuty 等多種渠道發送通知。</p>
                    </div>
                    <div class="card p-6">
                        <div class="text-4xl mb-3">🎯</div>
                        <h3 class="text-xl font-bold mb-2">服務水準目標 (SLO)</h3>
                        <p class="text-gray-600">定義和監控關鍵服務的 SLOs 和 SLIs，確保服務品質符合預期，並追蹤您的錯誤預算（Error Budgets）。</p>
                    </div>
                    <div class="card p-6">
                        <div class="text-4xl mb-3">💻</div>
                        <h3 class="text-xl font-bold mb-2">儀表板即程式碼</h3>
                        <p class="text-gray-600">透過程式碼（JSON 或 Cue）來定義和管理您的儀表板，輕鬆實現版本控制、自動化部署和重複使用。</p>
                    </div>
                    <div class="card p-6">
                        <div class="text-4xl mb-3">🛡️</div>
                        <h3 class="text-xl font-bold mb-2">事件應變管理</h3>
                        <p class="text-gray-600">整合 On-Call 排程和事件管理工具，簡化從警報觸發到問題解決的整個應變流程。</p>
                    </div>
                    <div class="card p-6">
                        <div class="text-4xl mb-3">📈</div>
                        <h3 class="text-xl font-bold mb-2">前端與基礎設施監控</h3>
                        <p class="text-gray-600">提供開箱即用的解決方案，深入了解真實使用者體驗 (RUM) 和底層基礎設施的健康狀況。</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="demo" class="py-20">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold section-title">實戰演練</h2>
                    <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">理論結合實踐最有效。這裡我們模擬了演講中的兩個經典場景，讓您親手體驗 Grafana 如何解決實際問題。</p>
                </div>

                <div class="w-full max-w-5xl mx-auto">
                    <div class="border-b border-gray-200 mb-8">
                        <nav class="-mb-px flex justify-center space-x-8" aria-label="Tabs">
                            <button id="tab-btn-ecommerce" class="tab-btn active whitespace-nowrap py-4 px-1 text-lg font-medium">電商網站問題排查</button>
                            <button id="tab-btn-game" class="tab-btn whitespace-nowrap py-4 px-1 text-lg font-medium">遊戲數據儀表板</button>
                        </nav>
                    </div>

                    <div id="tab-content-ecommerce" class="tab-content">
                        <div class="card p-8">
                            <h3 class="text-2xl font-bold text-center mb-2">場景：Magical Bees 電商網站服務異常</h3>
                            <p class="text-center text-gray-600 mb-8">您剛被警報吵醒，發現網站錯誤率飆升。讓我們跟隨 SRE 的腳步，一步步找出問題根源。</p>
                            
                            <div class="bg-gray-50 p-6 rounded-lg mb-6 text-center">
                                <p class="text-lg font-medium text-gray-500">整體錯誤率</p>
                                <p class="text-5xl font-bold text-red-500">15.7%</p>
                            </div>

                            <div id="demo-ecommerce-workflow" class="space-y-4">
                               <p class="text-center text-gray-500">點擊下方按鈕，開始您的除錯之旅：</p>
                               <div class="flex justify-center">
                                    <button id="show-metrics-btn" class="btn-primary py-2 px-4 rounded-lg font-semibold">1. 查看指標 (Metrics)</button>
                               </div>

                               <div id="metrics-view" class="hidden p-4 bg-gray-100 rounded-lg">
                                   <h4 class="font-bold text-lg mb-2">📈 指標分析</h4>
                                   <p class="mb-4">指標顯示錯誤率在特定時間點急遽上升，尤其是在 `payment` 端點。</p>
                                   <div class="chart-container">
                                       <canvas id="errorRateChart"></canvas>
                                   </div>
                                   <div class="flex justify-center mt-4">
                                       <button id="show-traces-btn" class="btn-primary py-2 px-4 rounded-lg font-semibold">2. 深入追蹤 (Traces)</button>
                                   </div>
                               </div>

                               <div id="traces-view" class="hidden p-4 bg-gray-100 rounded-lg">
                                   <h4 class="font-bold text-lg mb-2">🔗 追蹤分析</h4>
                                   <p class="mb-4">追蹤顯示，錯誤請求都卡在一個非常慢的資料庫查詢上。讓我們看看這個請求的細節。</p>
                                   <div class="font-mono text-sm bg-white p-4 rounded overflow-x-auto">
                                       <div><span class="text-blue-500">service: gateway</span> | duration: 5025ms</div>
                                       <div class="ml-4"><span class="text-green-500">service: payment-api</span> | duration: 5010ms</div>
                                       <div class="ml-8 text-red-500 font-bold">
                                         <span class="bg-red-100 px-1 rounded">service: database</span> | query: SELECT * FROM payment | duration: 5001ms [ERROR]
                                         <div class="text-xs text-gray-500 font-normal mt-1 ml-2">└ tags: db.system=postgres, server.address=db-prod-1</div>
                                       </div>
                                   </div>
                                   <div class="flex justify-center mt-4">
                                       <button id="show-logs-btn" class="btn-primary py-2 px-4 rounded-lg font-semibold">3. 分析日誌 (Logs)</button>
                                   </div>
                               </div>

                               <div id="logs-view" class="hidden p-4 bg-gray-100 rounded-lg">
                                   <h4 class="font-bold text-lg mb-2">📜 日誌分析</h4>
                                   <p class="mb-4">日誌提供了最終的線索：資料庫回報 `payment` 這個資料表不存在！問題找到了。</p>
                                   <div class="font-mono text-sm bg-gray-800 text-white p-4 rounded overflow-x-auto">
                                       <p class="text-gray-400">> time="2025-09-22T11:08:59" level=info msg="Starting payment transaction for user_id=123"</p>
                                       <p class="text-red-400">> time="2025-09-22T11:09:00" level=error msg="Database query failed" error="relation \"payment\" does not exist"</p>
                                   </div>
                                    <p class="text-center mt-6 text-xl font-bold text-green-600">🎉 結論：透過指標、追蹤、日誌的關聯，我們在幾分鐘內就從一個模糊的警報，精準定位到了程式碼層級的錯誤！</p>
                               </div>
                            </div>
                        </div>
                    </div>

                    <div id="tab-content-game" class="tab-content hidden">
                         <div class="card p-8">
                            <h3 class="text-2xl font-bold text-center mb-2">場景：Super Groth 遊戲數據儀表板</h3>
                            <p class="text-center text-gray-600 mb-8">遊戲上線後，我們需要即時監控玩家行為。透過 Grafana Faro 收集前端遙測資料，我們可以快速建立儀表板。</p>
                            
                            <div class="flex justify-center mb-6">
                                <div class="w-full max-w-xs">
                                    <label for="level-filter" class="block text-sm font-medium text-gray-700 mb-1">篩選關卡:</label>
                                    <select id="level-filter" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
                                        <option value="all">所有關卡</option>
                                        <option value="0">第一關</option>
                                        <option value="1">第二關</option>
                                        <option value="2">第三關</option>
                                        <option value="3">第四關</option>
                                        <option value="4">第五關</option>
                                    </select>
                                </div>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                               <div class="bg-gray-50 p-6 rounded-lg text-center">
                                    <p id="coins-label" class="text-lg font-medium text-gray-500">總收集金幣</p>
                                    <p id="coins-value" class="text-5xl font-bold text-[#f39c12]">1,337</p>
                                </div>
                                <div class="bg-gray-50 p-6 rounded-lg text-center">
                                    <p id="deaths-label" class="text-lg font-medium text-gray-500">總死亡次數</p>
                                    <p id="deaths-value" class="text-5xl font-bold text-red-500">204</p>
                                </div>
                            </div>

                            <div class="mt-8">
                                <h4 class="font-bold text-lg mb-2 text-center">各關卡死亡次數</h4>
                                <div class="chart-container">
                                    <canvas id="playerDeathsChart"></canvas>
                                </div>
                                 <p id="game-conclusion" class="text-center mt-6 text-lg text-gray-700">看起來第三關是玩家的瓶頸。我們可以根據這個數據，考慮調整關卡難度或增加提示，以改善玩家體驗。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="resources" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                 <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold section-title">學習資源</h2>
                    <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">準備好開始您的 Grafana 之旅了嗎？這裡有一些絕佳的資源，可以幫助您從入門到精通。</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div class="card p-6">
                        <h3 class="text-xl font-bold mb-3">Grafana Play</h3>
                        <p class="text-gray-600 mb-4">一個公開的沙盒環境，無需安裝或註冊，即可立即體驗 Grafana 的所有功能和範例儀表板。</p>
                        <a href="javascript:void(0);" class="btn-secondary font-bold py-2 px-4 rounded-lg inline-block">立即體驗</a>
                    </div>
                     <div class="card p-6">
                        <h3 class="text-xl font-bold mb-3">Grafana Cloud 免費方案</h3>
                        <p class="text-gray-600 mb-4">註冊一個永久免費的 Grafana Cloud 帳號，這是開始您第一個專案最簡單的方式。</p>
                        <a href="javascript:void(0);" class="btn-secondary font-bold py-2 px-4 rounded-lg inline-block">免費註冊</a>
                    </div>
                     <div class="card p-6">
                        <h3 class="text-xl font-bold mb-3">Grafana for Beginners 系列</h3>
                        <p class="text-gray-600 mb-4">在我們的 YouTube 頻道上，有專為初學者設計的系列教學影片，內容深入淺出。</p>
                        <a href="javascript:void(0);" class="btn-secondary font-bold py-2 px-4 rounded-lg inline-block">觀看影片</a>
                    </div>
                    <div class="card p-6">
                        <h3 class="text-xl font-bold mb-3">社群論壇與 Slack</h3>
                        <p class="text-gray-600 mb-4">遇到問題了嗎？加入我們活躍的社群論壇或 Slack 頻道，與全球數萬名使用者和專家交流。</p>
                        <a href="javascript:void(0);" class="btn-secondary font-bold py-2 px-4 rounded-lg inline-block">加入社群</a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2025 Grafana Labs。此頁面是根據公開演講內容創建的互動式學習資源。</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            const navLinks = document.querySelectorAll('nav a[href^="#"]');
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    let targetId = this.getAttribute('href');
                    let targetElement = document.querySelector(targetId);
                    if(targetElement) {
                        targetElement.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            });

            const sections = document.querySelectorAll('main section');
            const headerNavLinks = document.querySelectorAll('#header .nav-link');
            
            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.4
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        headerNavLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href') === `#${id}`) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }, observerOptions);

            sections.forEach(section => {
                observer.observe(section);
            });
            
            const lgtmNodes = {
                loki: document.getElementById('loki-node'),
                tempo: document.getElementById('tempo-node'),
                mimir: document.getElementById('mimir-node'),
            };

            const lgtmDetails = {
                title: document.getElementById('lgtm-title'),
                description: document.getElementById('lgtm-description'),
            };

            const lgtmData = {
                loki: {
                    title: 'Loki：為日誌而生',
                    description: '受 Prometheus 啟發，Loki 不對日誌內容建立索引，而是對標籤建立索引，使其極具成本效益且易於操作。是日誌聚合的理想選擇。'
                },
                tempo: {
                    title: 'Tempo：分散式追蹤',
                    description: 'Tempo 易於使用且具成本效益，僅需物件儲存即可運作，適合長期保存追蹤資料。它支援 Jaeger、Zipkin 等多種開源追蹤協定。'
                },
                mimir: {
                    title: 'Mimir：大規模指標',
                    description: '您可以將 Mimir 視為 Prometheus 的超級版。它專為大規模、多租戶和長期指標儲存而設計，提供高可用性和水平擴展能力。'
                },
                default: {
                    title: '點擊左側節點查看詳情',
                    description: 'Grafana LGTM 技術棧提供了一套完整且高效的工具，幫助您收集、儲存和分析所有可觀測性資料。'
                }
            };
            
            let activeNode = null;

            Object.keys(lgtmNodes).forEach(key => {
                lgtmNodes[key].addEventListener('click', () => {
                    if (activeNode) {
                        activeNode.classList.remove('active');
                    }
                    
                    if (activeNode === lgtmNodes[key]) {
                        lgtmDetails.title.textContent = lgtmData.default.title;
                        lgtmDetails.description.textContent = lgtmData.default.description;
                        activeNode = null;
                    } else {
                        lgtmNodes[key].classList.add('active');
                        lgtmDetails.title.textContent = lgtmData[key].title;
                        lgtmDetails.description.textContent = lgtmData[key].description;
                        activeNode = lgtmNodes[key];
                    }
                });
            });

            const tabs = {
                ecommerce: {
                    btn: document.getElementById('tab-btn-ecommerce'),
                    content: document.getElementById('tab-content-ecommerce')
                },
                game: {
                    btn: document.getElementById('tab-btn-game'),
                    content: document.getElementById('tab-content-game')
                }
            };
            
            let errorRateChartInstance, playerDeathsChartInstance;

            const gameData = {
                labels: ['第一關', '第二關', '第三關', '第四關', '第五關'],
                deaths: [15, 25, 89, 45, 30],
                coins: [350, 280, 150, 307, 250],
                colors: {
                    base: [ 'rgba(52, 152, 219, 0.6)', 'rgba(243, 156, 18, 0.6)', 'rgba(231, 76, 60, 0.6)', 'rgba(26, 188, 156, 0.6)', 'rgba(155, 89, 182, 0.6)' ],
                    highlight: 'rgba(41, 128, 185, 1.0)',
                },
                borderColors: {
                    base: [ 'rgb(52, 152, 219)', 'rgb(243, 156, 18)', 'rgb(231, 76, 60)', 'rgb(26, 188, 156)', 'rgb(155, 89, 182)' ],
                    highlight: 'rgb(41, 128, 185)',
                }
            };

            function switchTab(activeTabKey) {
                Object.keys(tabs).forEach(key => {
                    const is_active = key === activeTabKey;
                    tabs[key].btn.classList.toggle('active', is_active);
                    tabs[key].content.classList.toggle('hidden', !is_active);
                });

                if (activeTabKey === 'ecommerce' && !errorRateChartInstance) {
                   createErrorRateChart();
                }
                if (activeTabKey === 'game' && !playerDeathsChartInstance) {
                   createPlayerDeathsChart();
                   setupGameFilters();
                }
            }

            tabs.ecommerce.btn.addEventListener('click', () => switchTab('ecommerce'));
            tabs.game.btn.addEventListener('click', () => switchTab('game'));
            
            const demoEcommerce = {
                showMetricsBtn: document.getElementById('show-metrics-btn'),
                showTracesBtn: document.getElementById('show-traces-btn'),
                showLogsBtn: document.getElementById('show-logs-btn'),
                metricsView: document.getElementById('metrics-view'),
                tracesView: document.getElementById('traces-view'),
                logsView: document.getElementById('logs-view')
            };
            
            demoEcommerce.showMetricsBtn.addEventListener('click', () => {
                demoEcommerce.metricsView.classList.remove('hidden');
                demoEcommerce.showMetricsBtn.parentElement.classList.add('hidden');
                if (!errorRateChartInstance) createErrorRateChart();
            });
             demoEcommerce.showTracesBtn.addEventListener('click', () => {
                demoEcommerce.tracesView.classList.remove('hidden');
                demoEcommerce.showTracesBtn.parentElement.classList.add('hidden');
            });
             demoEcommerce.showLogsBtn.addEventListener('click', () => {
                demoEcommerce.logsView.classList.remove('hidden');
                demoEcommerce.showLogsBtn.parentElement.classList.add('hidden');
            });

            function createErrorRateChart() {
                const ctx = document.getElementById('errorRateChart').getContext('2d');
                errorRateChartInstance = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['10:30', '10:35', '10:40', '10:45', '10:50', '10:55', '11:00', '11:05'],
                        datasets: [{
                            label: 'Payment API 錯誤率 (%)',
                            data: [1.2, 1.5, 1.3, 1.6, 15.2, 15.7, 15.5, 15.8],
                            borderColor: 'rgb(239, 68, 68)',
                            backgroundColor: 'rgba(239, 68, 68, 0.2)',
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: { display: true, text: '錯誤率 (%)' }
                            }
                        }
                    }
                });
            }

            function createPlayerDeathsChart() {
                const ctx = document.getElementById('playerDeathsChart').getContext('2d');
                playerDeathsChartInstance = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: gameData.labels,
                        datasets: [{
                            label: '死亡次數',
                            data: gameData.deaths,
                            backgroundColor: gameData.colors.base,
                            borderColor: gameData.borderColors.base,
                            borderWidth: 1
                        }]
                    },
                    options: {
                       responsive: true,
                       maintainAspectRatio: false,
                       indexAxis: 'y',
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            x: {
                                beginAtZero: true,
                                title: { display: true, text: '總死亡次數' }
                            }
                        }
                    }
                });
            }

            function setupGameFilters() {
                const levelFilter = document.getElementById('level-filter');
                const coinsLabel = document.getElementById('coins-label');
                const coinsValue = document.getElementById('coins-value');
                const deathsLabel = document.getElementById('deaths-label');
                const deathsValue = document.getElementById('deaths-value');
                const gameConclusion = document.getElementById('game-conclusion');

                levelFilter.addEventListener('change', (e) => {
                    const selectedLevel = e.target.value;
                    const newBgColors = [...gameData.colors.base];
                    const newBorderColors = [...gameData.borderColors.base];

                    if (selectedLevel === 'all') {
                        coinsLabel.textContent = '總收集金幣';
                        deathsLabel.textContent = '總死亡次數';
                        coinsValue.textContent = gameData.coins.reduce((a, b) => a + b, 0).toLocaleString();
                        deathsValue.textContent = gameData.deaths.reduce((a, b) => a + b, 0).toLocaleString();
                        gameConclusion.textContent = '看起來第三關是玩家的瓶頸。我們可以根據這個數據，考慮調整關卡難度或增加提示，以改善玩家體驗。';
                    } else {
                        const levelIndex = parseInt(selectedLevel);
                        coinsLabel.textContent = `${gameData.labels[levelIndex]} 收集金幣`;
                        deathsLabel.textContent = `${gameData.labels[levelIndex]} 死亡次數`;
                        coinsValue.textContent = gameData.coins[levelIndex].toLocaleString();
                        deathsValue.textContent = gameData.deaths[levelIndex].toLocaleString();
                        
                        gameConclusion.textContent = `在 ${gameData.labels[levelIndex]}，玩家平均收集了 ${gameData.coins[levelIndex]} 枚金幣，但也陣亡了 ${gameData.deaths[levelIndex]} 次。`;

                        newBgColors[levelIndex] = gameData.colors.highlight;
                        newBorderColors[levelIndex] = gameData.borderColors.highlight;
                    }
                    
                    playerDeathsChartInstance.data.datasets[0].backgroundColor = newBgColors;
                    playerDeathsChartInstance.data.datasets[0].borderColor = newBorderColors;
                    playerDeathsChartInstance.update();
                });
            }

            switchTab('ecommerce');
        });
    </script>
</body>
</html>

