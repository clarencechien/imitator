
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‘¨å† ç”·æ•™æˆçš„ETFæŠ•è³‡å¿ƒæ³•åœ–è¡¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap" rel="stylesheet">
    <!--
    Infographic Narrative Plan:
    1.  Introduction: Hook with the 600% return, introduce Professor Chou.
    2.  Lump-Sum vs. DCA: Visually compare the academic 'best' vs. human preference.
    3.  Core Principles: Use HTML/CSS to create a visual flow of his main philosophies.
    4.  Asset Allocation: Use donut and bar charts to break down his portfolio.
    5.  Myth Busting: A side-by-side comparison of common investor fallacies.
    6.  The Power of Compounding: A line chart to visualize the Rule of 72 in action.
    7.  Conclusion/Actionable Strategy: A simple flowchart for beginners.

    Visualization Choices (NO SVG, NO Mermaid JS):
    -   Data: Lump-sum win rate vs. DCA preference. Goal: Compare. Visualization: Bar Chart (Chart.js) & Big Number (HTML). Justification: Clear comparison and high-impact stat.
    -   Data: Asset Allocation (Stocks/Bonds). Goal: Show Composition. Visualization: Donut Chart (Chart.js). Justification: Ideal for part-to-whole relationships.
    -   Data: Stock Portfolio Breakdown (TW/US). Goal: Show Composition. Visualization: Horizontal Stacked Bar Chart (Chart.js). Justification: Excellent for showing composition within a category.
    -   Data: Compounding growth (1M -> 32M). Goal: Show Change. Visualization: Line Chart (Chart.js). Justification: Standard for showing trends over time.
    -   Data: Core Principles & Investment Flow. Goal: Organize. Visualization: Structured HTML/CSS with Tailwind. Justification: Creates a clear visual flow without prohibited libraries/formats.

    Confirmation: NEITHER Mermaid JS NOR SVG were used anywhere in this output. All visuals are rendered via Chart.js (Canvas) or structured HTML/CSS.
    Selected Color Palette: Energetic & Playful (#00A6A6, #753A88, #D91E4A, #F29F05, #F2622E)
    -->
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f0f4f8; /* Light gray-blue background */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px; /* Default height */
            max-height: 400px; /* Max height to prevent overflow */
        }
        @media (min-width: 768px) { /* Medium screens and up */
            .chart-container {
                height: 350px;
            }
        }
        .flow-step {
            border-color: #00A6A6; /* Energetic & Playful - Teal */
            transition: all 0.3s ease-in-out;
        }
        .flow-step:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 166, 166, 0.3), 0 4px 6px -2px rgba(0, 166, 166, 0.1);
        }
        .card-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-black text-[#753A88] mb-2">å¯Œè¶³ä»Šå‘¨èµ·ï¼šå‘¨å† ç”·æ•™æˆçš„ETFæŠ•è³‡å¿ƒæ³•</h1>
            <p class="text-lg text-gray-600">ä¸€ä½å‚³å¥‡æŠ•è³‡äººï¼Œå¦‚ä½•ç”¨æœ€ç°¡å–®çš„æ–¹æ³•ï¼Œé”åˆ°è¶…é600%çš„å ±é…¬ç‡</p>
        </header>

        <section id="strategy-choice" class="mb-16">
            <h2 class="text-3xl font-bold text-center mb-8 text-[#00A6A6]">æŠ•è³‡ç¬¬ä¸€æ­¥ï¼šå¦‚ä½•æŠ•å…¥è³‡é‡‘ï¼Ÿ</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-stretch">
                <div class="bg-white rounded-lg card-shadow p-6 flex flex-col">
                    <h3 class="text-xl font-bold mb-4 text-center">å­¸è¡“ç ”ç©¶ vs. å¤§çœ¾é¸æ“‡</h3>
                    <div class="chart-container flex-grow" style="height: 250px;">
                        <canvas id="investmentMethodChart"></canvas>
                    </div>
                    <p class="mt-4 text-gray-600 text-sm">å…ˆé‹’æ©Ÿæ§‹ç ”ç©¶é¡¯ç¤ºï¼Œæœ‰68%çš„æ©Ÿç‡ï¼Œå–®ç­†æŠ•å…¥çš„é•·æœŸç¸¾æ•ˆæœƒå‹éåˆ†æ‰¹æŠ•å…¥ã€‚ç„¶è€Œï¼Œç¶²è·¯èª¿æŸ¥å»ç™¼ç¾ï¼Œé«˜é”74%çš„æŠ•è³‡äººå› ç‚ºå®³æ€•è²·åœ¨é«˜é»ï¼Œè€Œå‚¾å‘é¸æ“‡å®šæœŸå®šé¡ã€‚é€™æ­ç¤ºäº†ç†æ€§æ•¸æ“šèˆ‡æŠ•è³‡å¿ƒç†çš„å·¨å¤§å·®ç•°ã€‚</p>
                </div>
                <div class="bg-white rounded-lg card-shadow p-6 text-center flex flex-col justify-center items-center h-full">
                     <h3 class="text-xl font-bold mb-4">å¤šæ•¸äººçš„é¸æ“‡</h3>
                    <div class="text-8xl font-black text-[#D91E4A] my-4">74%</div>
                    <p class="text-lg font-bold">çš„æŠ•è³‡äººåå¥½å®šæœŸå®šé¡</p>
                    <p class="mt-4 text-gray-600 text-sm">å‘¨æ•™æˆæŒ‡å‡ºï¼Œé›–ç„¶å–®ç­†æŠ•å…¥åœ¨æ•¸æ“šä¸Šæ›´å„ªï¼Œä½†å®šæœŸå®šé¡èƒ½å…‹æœäººæ€§å¼±é»ï¼Œå¹«åŠ©æŠ•è³‡äººã€ŒæŒçºŒç•™åœ¨å¸‚å ´ã€ï¼Œé€™æœ¬èº«å°±æ˜¯ä¸€ä»¶å¥½äº‹ã€‚è‹¥ç„¡æ³•åšåˆ°å–®ç­†æŠ•å…¥ï¼Œå®šæœŸå®šé¡æ˜¯å€‹å¥½é¸æ“‡ã€‚</p>
                </div>
            </div>
        </section>

        <section id="core-principles" class="mb-16">
            <h2 class="text-3xl font-bold text-center mb-8 text-[#00A6A6]">æŠ•è³‡å¿ƒæ³•ä¸‰å¤§æ”¯æŸ±</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="bg-white rounded-lg card-shadow p-6 text-center flow-step border-t-8">
                    <div class="text-5xl mb-4">ğŸ§˜</div>
                    <h3 class="text-xl font-bold mb-2">éš¨ä¾¿è²·ï¼Œä¸è¦è³£</h3>
                    <p class="text-gray-600 text-sm">æ­¤è™•çš„ã€Œéš¨ä¾¿è²·ã€å°ˆæŒ‡ETFï¼Œè€Œéå€‹è‚¡ã€‚æ ¸å¿ƒä¿¡å¿µæ˜¯å¸‚å ´é•·æœŸå‘ä¸Šï¼Œå› ç‚ºè‹¥éå¦‚æ­¤ï¼Œç„¡äººæœƒæ‰¿æ“”é¢¨éšªã€‚è²·é€²ä¸¦é•·æœŸæŒæœ‰(Buy and Hold)æ˜¯ç¶“å­¸è¡“é©—è­‰çš„æœ€ä½³ç­–ç•¥ã€‚å¿˜æ‰çŸ­æœŸæ³¢å‹•ï¼Œç›¸ä¿¡æ•¸æ“šã€‚</p>
                </div>
                <div class="bg-white rounded-lg card-shadow p-6 text-center flow-step border-t-8">
                     <div class="text-5xl mb-4">â³</div>
                    <h3 class="text-xl font-bold mb-2">åˆ†æ•£èˆ‡æ™‚é–“æ˜¯æœ€å¥½çš„æœ‹å‹</h3>
                    <p class="text-gray-600 text-sm">å·´è²ç‰¹å°‡ã€Œæ™‚é–“ã€æ¯”å–»ç‚ºå¤ é•·çš„å¡é“ã€‚è€Œã€Œåˆ†æ•£ã€å‰‡æ˜¯å¸‚å ´ä¸Šå”¯ä¸€å…è²»çš„åˆé¤ã€‚èˆ‡å…¶å¤§æµ·æ’ˆé‡èˆ¬å°‹æ‰¾é£†è‚¡ï¼Œä¸å¦‚ã€ŒæŠŠæ•´ç‰‡å¤§æµ·è²·ä¸‹ä¾†ã€ï¼Œä¸éŒ¯éä»»ä½•æ©Ÿæœƒã€‚</p>
                </div>
                <div class="bg-white rounded-lg card-shadow p-6 text-center flow-step border-t-8">
                     <div class="text-5xl mb-4">ğŸš«</div>
                    <h3 class="text-xl font-bold mb-2">é€²å…¥å¸‚å ´çš„æ™‚æ©Ÿä¸é‡è¦</h3>
                    <p class="text-gray-600 text-sm">æ‰€è¬‚é«˜ä½é»éƒ½æ˜¯å¾Œè¦‹ä¹‹æ˜ã€‚å½¼å¾—Â·æ—å€çš„ç ”ç©¶é¡¯ç¤ºï¼Œ30å¹´ä¾†ï¼Œæ¯å¹´è²·åœ¨æœ€é«˜é»å’Œæœ€ä½é»çš„äººï¼Œæœ€çµ‚å¹´åŒ–å ±é…¬ç‡åƒ…å·®1.1%ã€‚ç•™åœ¨å¸‚å ´çš„ã€Œè€åŠ›ã€é æ¯”æŠ“æº–æ™‚æ©Ÿçš„ã€Œçœ¼åŠ›ã€é‡è¦ã€‚</p>
                </div>
            </div>
        </section>

        <section id="asset-allocation" class="mb-16">
            <h2 class="text-3xl font-bold text-center mb-8 text-[#00A6A6]">æ•™æˆçš„è³‡ç”¢é…ç½®ä¸€è¦½</h2>
            <div class="bg-white rounded-lg card-shadow p-6">
                <div class="grid grid-cols-1 md:grid-cols-5 gap-8 items-center">
                    <div class="md:col-span-2">
                        <div class="chart-container mx-auto" style="height: 300px;">
                            <canvas id="assetAllocationChart"></canvas>
                        </div>
                    </div>
                    <div class="md:col-span-3">
                        <h3 class="text-xl font-bold mb-4">é…ç½®è§£æï¼šç‚ºä½•é€™æ¨£åˆ†ï¼Ÿ</h3>
                        <p class="text-gray-600 mb-4">å‘¨æ•™æˆçš„é…ç½®ä»¥è¿½æ±‚æˆé•·ç‚ºä¸»ï¼Œè‚¡ç¥¨ä½”æ¯”é«˜é”90%ã€‚ä»–å¼·èª¿é€™ä»½é…ç½®åŸºæ–¼ä»–å€‹äººç‹€æ³ï¼ˆä»åœ¨è·ã€æœ‰æµ·å¤–è³‡é‡‘éœ€æ±‚ï¼‰ï¼ŒæŠ•è³‡äººæ‡‰è¦–è‡ªèº«å¹´é½¡ã€æ”¶å…¥ã€ç›®æ¨™èˆ‡é¢¨éšªæ‰¿å—åº¦èª¿æ•´ã€‚</p>
                        <div class="space-y-4">
                             <div>
                                <h4 class="font-bold text-[#753A88]">å°è‚¡ (ä½”ç¸½è³‡ç”¢60%)</h4>
                                <p class="text-sm text-gray-600">ä¸»æŠ•0050èˆ‡006208ã€‚ä»–å»ºè­°æ–°æ‰‹å¯ç›´æ¥é¸ç¸½ç®¡ç†è²»è¼ƒä½çš„006208ã€‚</p>
                            </div>
                            <div>
                                <h4 class="font-bold text-[#D91E4A]">ç¾è‚¡ (ä½”ç¸½è³‡ç”¢30%)</h4>
                                <p class="text-sm text-gray-600">ä¸»æŠ•SPYèˆ‡VOOã€‚åŒæ¨£åœ°ï¼Œä»–æ¨è–¦è²»ç”¨è¼ƒä½çš„VOOã€‚ä»–å»ºè­°æŠ•è³‡äººæ‡‰ç›¡é‡åˆ†æ•£è‡³ç¾è‚¡ï¼Œå…‹æœã€Œå®¶é„‰åèª¤ã€ã€‚</p>
                            </div>
                            <div>
                                <h4 class="font-bold text-[#F29F05]">å…¨çƒå‚µåˆ¸ (ä½”ç¸½è³‡ç”¢10%)</h4>
                                <p class="text-sm text-gray-600">é¸æ“‡æœ€åˆ†æ•£çš„BNDWï¼ˆä¸–ç•Œå‚µåˆ¸ETFï¼‰ï¼Œä»¥åˆ†æ•£é¢¨éšªï¼Œè€Œéè¿½æ±‚é«˜å ±é…¬ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="myth-busting" class="mb-16">
            <h2 class="text-3xl font-bold text-center mb-8 text-[#00A6A6]">ç ´è§£å…©å¤§æŠ•è³‡è¿·æ€</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-white rounded-lg card-shadow p-6">
                    <h3 class="text-xl font-bold mb-4">è¿·æ€ä¸€ï¼šç›´æ¥è²·å°ç©é›»ï¼Œä¸å°±å¥½äº†ï¼Ÿ</h3>
                    <p class="text-gray-600 mb-4 text-sm">è¨±å¤šäººèªç‚º0050ä¸­å°ç©é›»ä½”æ¯”éåŠï¼Œä¸å¦‚ç›´æ¥æŠ•è³‡å°ç©é›»ã€‚å‘¨æ•™æˆå¾ä¸‰å€‹å±¤é¢åé§ï¼š</p>
                    <ul class="list-disc list-inside space-y-2 text-sm text-gray-700">
                        <li><strong class="text-[#753A88]">åˆ†æ•£æ•ˆæœï¼š</strong>è²·30-50æª”è‚¡ç¥¨å·²èƒ½åˆ†æ•£95%é¢¨éšªã€‚å–ç¶œåˆæœæ±å’ŒæŸ³æ©™æ±çµ‚ç©¶ä¸åŒã€‚</li>
                        <li><strong class="text-[#753A88]">å…¨çƒåŒ–ï¼š</strong>è²·å°ç©é›»ã€é´»æµ·ç­‰å·²æ˜¯å…¨çƒåŒ–ä½ˆå±€ï¼Œå…¶ç‡Ÿé‹å—å…¨çƒæ™¯æ°£å½±éŸ¿é å¤§æ–¼å°ç£æœ¬åœ°ã€‚</li>
                        <li><strong class="text-[#753A88]">æ­·å²ç¸¾æ•ˆï¼š</strong>éå»20å¹´ï¼Œå°è‚¡æ¼²å¹…ç¬¬ä¸€çš„æ˜¯ç‡Ÿå»ºè‚¡ã€Œæ¬£å·´å·´ã€ï¼Œè€Œéå°ç©é›»ã€‚é¸è‚¡æ°¸é æ˜¯å¾Œè¦‹ä¹‹æ˜ã€‚</li>
                    </ul>
                </div>
                 <div class="bg-white rounded-lg card-shadow p-6">
                    <h3 class="text-xl font-bold mb-4">è¿·æ€äºŒï¼šå­˜é«˜è‚¡æ¯ETFæˆ–é‡‘èè‚¡æœ€ç©©ï¼Ÿ</h3>
                    <p class="text-gray-600 mb-4 text-sm">ã€Œå­˜è‚¡ã€ä¸€è©æœ¬èº«å°±å…·èª¤å°æ€§ï¼Œè‚¡ç¥¨çš†æœ‰é¢¨éšªã€‚æ•™æˆä¸æ¨è–¦é€™å…©ç¨®åšæ³•ï¼š</p>
                    <ul class="list-disc list-inside space-y-2 text-sm text-gray-700">
                        <li><strong class="text-[#D91E4A]">é‡‘èè‚¡ï¼š</strong>çœ‹ä¼¼ç©©å®šï¼Œå¯¦ç‚ºé«˜æ§“æ¡¿è¡Œæ¥­ã€‚æ•¸æ“šé¡¯ç¤ºï¼Œé‡‘èè‚¡ETF(0055)éå»ç¸¾æ•ˆä¸å¦‚0050ï¼Œæ³¢å‹•å»æ›´é«˜ã€‚</li>
                        <li><strong class="text-[#D91E4A]">é«˜è‚¡æ¯ï¼š</strong>é ˜æ¯æ˜¯ã€Œå·¦æ‰‹æ›å³æ‰‹ã€ï¼Œä¸”è‚¡æ¯éœ€èª²ç¨…ã€‚å®ƒå‰å¥ªäº†ã€Œè¤‡åˆ©ã€é€™å€‹ä¸–ç•Œç¬¬å…«å¤§å¥‡è¹Ÿçš„å¨åŠ›ï¼Œè®“äººæ»¿è¶³æ–¼å–®åˆ©ã€‚è€Œæ‰€è¬‚çš„ã€Œå¡«æ¯ã€ä¸¦éå¿…ç„¶ã€‚</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="compounding" class="mb-16">
            <h2 class="text-3xl font-bold text-center mb-8 text-[#00A6A6]">ä¸ƒäºŒæ³•å‰‡ï¼šè¦‹è­‰è¤‡åˆ©çš„å¨åŠ›</h2>
            <div class="bg-white rounded-lg card-shadow p-6">
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                     <div class="flex flex-col justify-center">
                        <h3 class="text-xl font-bold mb-2">40å¹´ï¼Œ100è¬è®Š3200è¬</h3>
                        <p class="text-gray-600 text-sm">å‡è¨­å¸‚å ´å¹´åŒ–å ±é…¬ç‡ç‚º9%ï¼Œæ ¹æ“šã€Œä¸ƒäºŒæ³•å‰‡ã€(72 Ã· 9 = 8)ï¼Œè³‡ç”¢æ¯8å¹´èƒ½ç¿»ä¸€å€ã€‚ä¸€ä½25æ­²çš„å¹´è¼•äººè‹¥æŠ•è³‡100è¬ï¼Œåˆ°65æ­²é€€ä¼‘æ™‚ï¼Œ40å¹´é–“è³‡ç”¢å°‡ç¿»5æ¬¡å€ï¼ˆ40å¹´/8å¹´ï¼‰ï¼Œ2çš„5æ¬¡æ–¹ç­‰æ–¼32ï¼Œæœ€çµ‚è³‡ç”¢å°‡æˆé•·è‡³3200è¬å…ƒã€‚é€™å¼µåœ–è¡¨é¡¯ç¤ºäº†é€™è¶Ÿé©šäººçš„è²¡å¯Œç´¯ç©æ—…ç¨‹ã€‚</p>
                        <p class="mt-4 text-sm font-bold text-[#753A88]">å‰ææ˜¯ï¼šä½ å¿…é ˆæ’å¾—ä½ï¼Œé•·æœŸç•™åœ¨å¸‚å ´ä¸Šã€‚</p>
                     </div>
                    <div class="chart-container" style="height:300px;">
                        <canvas id="compoundingChart"></canvas>
                    </div>
                 </div>
            </div>
        </section>
        
        <section id="final-advice" class="text-center mb-12">
            <h2 class="text-3xl font-bold text-center mb-8 text-[#00A6A6]">çµ¦ä½ çš„ç°¡å–®æŠ•è³‡æµç¨‹</h2>
            <div class="bg-white rounded-lg card-shadow p-8 max-w-4xl mx-auto">
                <p class="mb-6 text-gray-700">å‘¨æ•™æˆçš„å¯¦éš›åšæ³•ï¼Œæ˜¯çµåˆç´€å¾‹èˆ‡å½ˆæ€§çš„æ™ºæ…§ã€‚é€™å¥—æ–¹æ³•æ—¢èƒ½å…‹æœäººæ€§ï¼Œåˆèƒ½æŠŠæ¡æ™‚æ©Ÿã€‚</p>
                <div class="flex flex-col md:flex-row items-stretch justify-center space-y-4 md:space-y-0 md:space-x-4">
                    <div class="bg-[#e6fffa] p-4 rounded-lg text-center flex-1 flex flex-col justify-center items-center">
                        <div class="text-3xl">ğŸ—“ï¸</div>
                        <p class="font-bold mt-2">å®šæœŸå®šé¡</p>
                        <p class="text-xs text-gray-600">æŒçºŒæ‰£æ¬¾ï¼Œå¼·è¿«å„²è“„</p>
                    </div>
                    <div class="text-2xl font-bold text-[#00A6A6] flex items-center justify-center md:rotate-0 rotate-90">â¡ï¸</div>
                    <div class="bg-[#fff5e6] p-4 rounded-lg text-center flex-1 flex flex-col justify-center items-center">
                        <div class="text-3xl">ğŸ“‰</div>
                        <p class="font-bold mt-2">å¸‚å ´ä¿®æ­£æ™‚</p>
                        <p class="text-xs text-gray-600">å‡ºç¾éç†æ€§ä¸‹è·Œ</p>
                    </div>
                    <div class="text-2xl font-bold text-[#00A6A6] flex items-center justify-center md:rotate-0 rotate-90">â¡ï¸</div>
                    <div class="bg-[#ffe6e6] p-4 rounded-lg text-center flex-1 flex flex-col justify-center items-center">
                        <div class="text-3xl">ğŸ’°</div>
                        <p class="font-bold mt-2">å–®ç­†åŠ ç¢¼</p>
                        <p class="text-xs text-gray-600">å‹‡æ•¢æŠ•å…¥ï¼ŒåŠ é€Ÿç´¯ç©</p>
                    </div>
                    <div class="text-2xl font-bold text-[#00A6A6] flex items-center justify-center md:rotate-0 rotate-90">â¡ï¸</div>
                    <div class="bg-[#f0e6ff] p-4 rounded-lg text-center flex-1 flex flex-col justify-center items-center">
                        <div class="text-3xl">ğŸ§˜</div>
                        <p class="font-bold mt-2">æ”¾è‘—ä¸å‹•</p>
                        <p class="text-xs text-gray-600">å›åˆ°è€å»¢æ¨¡å¼</p>
                    </div>
                </div>
                 <p class="mt-8 italic text-gray-700 text-lg">ã€Œåœ¨æ­£ç¢ºçš„é“è·¯ä¸Šï¼Œèººè‘—è€å»¢ï¼Œå°±å¤ äº†ã€‚ã€</p>
            </div>
        </section>

    </div>

    <script>
        const vibrantPalette = ['#00A6A6', '#D91E4A', '#753A88', '#F29F05', '#F2622E'];
        
        function wrapLabels(label, maxWidth = 16) { // Default maxWidth to 16
            if (typeof label !== 'string' || label.length <= maxWidth) {
                return label; // Return original if not string or not long enough
            }
            const words = label.split(' ');
            let lines = [];
            let currentLine = '';
            for (let i = 0; i < words.length; i++) {
                const word = words[i];
                if ((currentLine + (currentLine ? ' ' : '') + word).length > maxWidth && currentLine.length > 0) {
                    lines.push(currentLine);
                    currentLine = word;
                } else {
                    currentLine += (currentLine ? ' ' : '') + word;
                }
            }
            if (currentLine.length > 0) {
                lines.push(currentLine);
            }
            return lines.length > 1 ? lines : lines[0]; // Return array only if multiple lines
        }

        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) {
              return label.join(' ');
            } else {
              return label;
            }
        };

        const defaultChartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'top',
                    labels: {
                        font: {
                            family: "'Noto Sans TC', sans-serif"
                        }
                    }
                },
                tooltip: {
                    callbacks: {
                        title: tooltipTitleCallback
                    },
                    bodyFont: {
                        family: "'Noto Sans TC', sans-serif"
                    },
                    titleFont: {
                        family: "'Noto Sans TC', sans-serif"
                    }
                }
            },
            scales: {
                x: {
                    ticks: {
                        font: {
                            family: "'Noto Sans TC', sans-serif"
                        }
                    }
                },
                y: {
                     ticks: {
                        font: {
                            family: "'Noto Sans TC', sans-serif"
                        }
                    }
                }
            }
        };

        const investmentMethodLabels = [
            wrapLabels('å–®ç­†æŠ•å…¥å­¸è¡“å‹ç‡'),
            wrapLabels('å¤§çœ¾åå¥½å®šæœŸå®šé¡')
        ];

        new Chart(document.getElementById('investmentMethodChart'), {
            type: 'bar',
            data: {
                labels: investmentMethodLabels,
                datasets: [{
                    label: 'ç™¾åˆ†æ¯” (%)',
                    data: [68, 74],
                    backgroundColor: [vibrantPalette[0], vibrantPalette[1]],
                    borderColor: [vibrantPalette[0], vibrantPalette[1]],
                    borderWidth: 1
                }]
            },
            options: {
                ...defaultChartOptions,
                indexAxis: 'y',
                scales: {
                    x: {
                        beginAtZero: true,
                        max: 100,
                         ticks: {
                            font: { family: "'Noto Sans TC', sans-serif" }
                        }
                    },
                    y: {
                         ticks: {
                            font: { family: "'Noto Sans TC', sans-serif" }
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                     tooltip: {
                        callbacks: {
                            title: tooltipTitleCallback
                        },
                        bodyFont: { family: "'Noto Sans TC', sans-serif" },
                        titleFont: { family: "'Noto Sans TC', sans-serif" }
                    }
                }
            }
        });

        new Chart(document.getElementById('assetAllocationChart'), {
            type: 'doughnut',
            data: {
                labels: ['å°è‚¡', 'ç¾è‚¡', 'å…¨çƒå‚µåˆ¸'],
                datasets: [{
                    label: 'è³‡ç”¢é…ç½®æ¯”ä¾‹',
                    data: [60, 30, 10],
                    backgroundColor: [vibrantPalette[0], vibrantPalette[1], vibrantPalette[3]],
                    hoverOffset: 4
                }]
            },
            options: {
                ...defaultChartOptions,
                cutout: '60%',
            }
        });

        const compoundingData = [];
        const compoundingLabels = [];
        let principal = 100; // Representing 1 million
        
        // Calculate yearly data for smooth curve, then filter for display
        for (let year = 0; year <= 40; year++) {
            compoundingLabels.push(year); // Store actual year
            compoundingData.push(parseFloat(principal.toFixed(2))); // Store value for this year
            
            if (year < 40) { // Avoid calculating for year 41
                 // More accurate compounding: Apply 9% annual growth
                 // The "doubles every 8 years" is an approximation of 9% growth.
                 // (1.09)^8 is approx 1.9925, very close to 2.
                 principal *= 1.09;
            }
        }
        // Ensure the final point is exactly 3200 if using the simplified doubling model,
        // or let the 9% compound naturally. For this visualization, let's stick to the narrative's 3200.
        // To match the narrative of 100 -> 3200 in 40 years (doubling 5 times)
        let narrativePrincipal = 100;
        const narrativeData = [100];
        const narrativeLabels = [0];

        for (let year = 1; year <= 40; year++) {
            narrativeLabels.push(year);
            if (year % 8 === 0) {
                narrativePrincipal *= 2;
            } else {
                 // For intermediate points, interpolate or use the 9% growth factor on previous year's narrative value
                 // This makes the graph smoother while hitting the 8-year doubling points.
                 // narrativePrincipal = narrativeData[narrativeData.length-1] * 1.09;
                 // For simplicity and to match the "doubles every 8 years" narrative clearly:
                 // We can just plot the 8-year marks or use the 9% compounded actuals.
                 // Let's use the 9% compounded actuals for a smoother, more realistic curve,
                 // understanding it will be very close to 3200.
            }
             // Use the actual compounded data for the graph
            narrativeData.push(compoundingData[year]);
        }
        // Ensure the final data point matches the narrative exactly if needed,
        // or accept the slight deviation from pure 9% compounding vs. perfect 8-year doubling.
        // The compoundingData[40] will be close to 3140.9, let's use that for realistic 9% growth.
        // If strict adherence to 3200 is needed:
        // narrativeData[40] = 3200;


        const displayLabels = compoundingLabels.filter(year => year % 5 === 0 || year === 1 || year === 40);
        const displayData = displayLabels.map(year => compoundingData[compoundingLabels.indexOf(year)]);


        new Chart(document.getElementById('compoundingChart'), {
            type: 'line',
            data: {
                labels: displayLabels,
                datasets: [{
                    label: 'ç™¾è¬æ–°å°å¹£',
                    data: displayData,
                    fill: true,
                    backgroundColor: 'rgba(0, 166, 166, 0.2)', // Teal from palette
                    borderColor: vibrantPalette[0], // Teal
                    tension: 0.1
                }]
            },
            options: {
                ...defaultChartOptions,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'è³‡ç”¢ (ç™¾è¬æ–°å°å¹£)',
                            font: { family: "'Noto Sans TC', sans-serif" }
                        }
                    },
                    x: {
                         title: {
                            display: true,
                            text: 'æŠ•è³‡å¹´æœŸ (å¹´)',
                            font: { family: "'Noto Sans TC', sans-serif" }
                        }
                    }
                },
                plugins: {
                     legend: { display: false },
                     tooltip: {
                        callbacks: {
                            title: (tooltipItems) => `ç¬¬ ${tooltipItems[0].label} å¹´`,
                            label: (context) => `è³‡ç”¢ç´„: ${context.formattedValue} ç™¾è¬å…ƒ`
                        },
                        bodyFont: { family: "'Noto Sans TC', sans-serif" },
                        titleFont: { family: "'Noto Sans TC', sans-serif" }
                    }
                }
            }
        });
    </script>

</body>
</html>
