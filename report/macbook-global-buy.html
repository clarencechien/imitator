<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>全球採購策略：M4 MacBook Pro 成本效益分析</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 450px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 450px;
            }
        }
        .flow-arrow::after {
            content: '▼';
            font-size: 2rem;
            color: #4299E1;
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
            display: block;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-300">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">

        <header class="text-center py-8 md:py-12">
            <h1 class="text-4xl md:text-5xl font-bold text-blue-400 tracking-tight">全球採購策略</h1>
            <h2 class="text-2xl md:text-3xl font-semibold text-teal-400 mt-2">M4 MacBook Pro 跨國購買成本效益分析</h2>
            <p class="mt-4 max-w-3xl mx-auto text-lg text-gray-400">為尋求極致性價比的您，我們深入剖析全球五大市場，綜合考量價格、稅務、旅費與可行性，找出購買特定型號 14吋 M4 MacBook Pro 的最佳地點。</p>
        </header>
        
        <section class="my-10 p-6 md:p-8 bg-gray-800 rounded-2xl shadow-xl border-t-4 border-blue-500">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div>
                    <h3 class="text-3xl font-bold text-white">分析基準：台灣採購成本</h3>
                    <p class="mt-4 text-gray-400 text-base">所有海外採購的效益評估，都以此為基準。我們設定了兩個比較點：一是標準零售價，二是針對特定族群的教育優惠價，這是影響最終決策的關鍵變數。</p>
                </div>
                <div class="grid grid-cols-2 gap-4 text-center">
                    <div class="bg-gray-700 p-4 rounded-lg">
                        <p class="text-lg font-medium text-gray-400">標準零售價</p>
                        <p class="text-4xl font-bold text-red-400 mt-2">NT$67,900</p>
                    </div>
                    <div class="bg-gray-700 p-4 rounded-lg">
                        <p class="text-lg font-medium text-gray-400">預估教育優惠價</p>
                        <p class="text-4xl font-bold text-blue-400 mt-2">NT$63,550</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="my-10 p-6 md:p-8 bg-gray-800 rounded-2xl shadow-xl">
            <h3 class="text-3xl font-bold text-center text-white">第一輪：純產品價格競賽</h3>
            <p class="mt-4 max-w-3xl mx-auto text-center text-gray-400">不考慮任何旅行成本，僅比較各國的含稅或退稅後淨產品價格。越南和日本在此階段展現出最大的價格優勢。</p>
            <div class="mt-8 chart-container">
                <canvas id="netProductPriceChart"></canvas>
            </div>
        </section>

        <section class="my-10 p-6 md:p-8 bg-gray-800 rounded-2xl shadow-xl">
            <h3 class="text-3xl font-bold text-center text-white">第二輪：計入旅費的總成本現實</h3>
            <p class="mt-4 max-w-3xl mx-auto text-center text-gray-400">當我們將必要的機票與雜項開銷計入後，戰局完全改變。長途飛行的成本嚴重侵蝕了美國和澳洲的價格優勢，而鄰近地區的總成本則更具競爭力。</p>
            <div class="mt-8 chart-container">
                <canvas id="totalCostChart"></canvas>
            </div>
        </section>
        
        <section class="my-10 p-6 md:p-8 bg-gray-800 rounded-2xl shadow-xl">
            <h3 class="text-3xl font-bold text-center text-white">最終戰：淨節省金額排名</h3>
            <p class="mt-4 max-w-3xl mx-auto text-center text-gray-400">這是最終的決策依據。此圖表顯示了與台灣標準零售價相比，計入所有成本後的最終淨儲蓄（或虧損）。正值代表省錢，負值代表比在台灣買更貴。</p>
            <div class="mt-8 chart-container">
                <canvas id="netSavingsChart"></canvas>
            </div>
        </section>

        <section class="my-10 text-center">
             <h3 class="text-3xl font-bold text-white">決策流程與可行性矩陣</h3>
             <p class="mt-4 max-w-3xl mx-auto text-gray-400">價格不是唯一考量。我們將退稅的複雜度與所需時間納入評估，為您提供一個全面的決策框架。</p>
            <div class="mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6">
                <div class="bg-gray-800 p-6 rounded-lg shadow-md border-b-4 border-red-500">
                    <h4 class="font-bold text-xl text-white"><strong>美國 (奧勒岡)</strong></h4>
                    <p class="mt-2 text-gray-400">程序複雜度: <span class="font-semibold text-green-400">低</span></p>
                    <p class="mt-1 text-gray-400">旅行天數: <span class="font-semibold text-red-400">3+ 天</span></p>
                </div>
                <div class="bg-gray-800 p-6 rounded-lg shadow-md border-b-4 border-green-500">
                    <h4 class="font-bold text-xl text-white"><strong>香港</strong></h4>
                    <p class="mt-2 text-gray-400">程序複雜度: <span class="font-semibold text-green-300">極低</span></p>
                    <p class="mt-1 text-gray-400">旅行天數: <span class="font-semibold text-green-300">1-2 天</span></p>
                </div>
                <div class="bg-gray-800 p-6 rounded-lg shadow-md border-b-4 border-yellow-500">
                    <h4 class="font-bold text-xl text-white"><strong>日本</strong></h4>
                    <p class="mt-2 text-gray-400">程序複雜度: <span class="font-semibold text-green-400">低 (2026前)</span></p>
                    <p class="mt-1 text-gray-400">旅行天數: <span class="font-semibold text-green-400">2-3 天</span></p>
                </div>
                <div class="bg-gray-800 p-6 rounded-lg shadow-md border-b-4 border-red-600">
                    <h4 class="font-bold text-xl text-white"><strong>澳洲</strong></h4>
                    <p class="mt-2 text-gray-400">程序複雜度: <span class="font-semibold text-yellow-400">中</span></p>
                    <p class="mt-1 text-gray-400">旅行天數: <span class="font-semibold text-red-400">3+ 天</span></p>
                </div>
                 <div class="bg-gray-800 p-6 rounded-lg shadow-md border-b-4 border-orange-500">
                    <h4 class="font-bold text-xl text-white"><strong>越南</strong></h4>
                    <p class="mt-2 text-gray-400">程序複雜度: <span class="font-semibold text-red-400">高</span></p>
                    <p class="mt-1 text-gray-400">旅行天數: <span class="font-semibold text-green-400">2-3 天</span></p>
                </div>
            </div>
        </section>

        <section class="my-10 p-6 md:p-8 bg-gray-800 rounded-2xl shadow-xl border-t-4 border-red-500">
            <h3 class="text-3xl font-bold text-center text-white">最終建議</h3>
            <div class="mt-8 flex flex-col items-center text-center">
                <div class="w-full max-w-md bg-gray-700 p-6 rounded-xl shadow-lg">
                    <p class="text-xl font-semibold text-white">您是否符合台灣的教育優惠資格？</p>
                </div>
                <div class="flow-arrow"></div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 w-full max-w-4xl">
                    <div class="bg-blue-900/50 p-6 rounded-xl border-2 border-blue-500">
                        <h4 class="text-2xl font-bold text-blue-300">是</h4>
                        <p class="mt-3 text-gray-300">那麼，<strong>在台灣本地使用教育優惠購買</strong> 無疑是真正最明智、最經濟的選擇。它為您省下約 NT$4,350，且消除了所有旅行成本、時間與潛在風險。</p>
                        <div class="mt-4 text-3xl font-extrabold text-blue-400">🏆 最佳策略 🏆</div>
                    </div>
                    <div class="bg-yellow-900/50 p-6 rounded-xl border-2 border-yellow-500">
                        <h4 class="text-2xl font-bold text-yellow-300">否</h4>
                        <p class="mt-3 text-gray-300">若無教育資格，<strong>越南</strong>在數字上能省最多錢 (約 NT$4,047)。但考量其退稅流程複雜且有不確定性，我們更推薦以下選項：</p>
                        <ul class="mt-4 text-left space-y-2 list-disc list-inside text-gray-300">
                           <li><strong>首選 (最佳綜合價值): 香港。</strong> 零稅務程序的終極便利性與低廉總成本。</li>
                           <li><strong>次選 (限時良機): 日本。</strong> 在 2026 年稅制改變前，是與香港匹敵的絕佳選項。</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <script>
        const wrapLabel = (label) => {
            const maxLength = 16;
            if (label.length <= maxLength) return label;
            const words = label.split(' ');
            const lines = [];
            let currentLine = '';
            for (const word of words) {
                if ((currentLine + word).length > maxLength) {
                    lines.push(currentLine.trim());
                    currentLine = '';
                }
                currentLine += word + ' ';
            }
            lines.push(currentLine.trim());
            return lines;
        };

        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) return label.join(' ');
            return label;
        };
        
        const commonChartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            indexAxis: 'y',
            plugins: {
                legend: { display: false },
                tooltip: {
                    callbacks: { title: tooltipTitleCallback },
                    backgroundColor: '#1A202C',
                    titleColor: '#E2E8F0',
                    bodyColor: '#E2E8F0',
                    titleFont: { size: 14, weight: 'bold' },
                    bodyFont: { size: 12 },
                    padding: 10,
                    cornerRadius: 4
                }
            },
            scales: {
                x: {
                    beginAtZero: true,
                    ticks: {
                        callback: function(value) {
                            return 'NT$' + new Intl.NumberFormat().format(value);
                        },
                        color: '#A0AEC0',
                        font: { size: 12, family: "'Noto Sans TC', sans-serif" }
                    },
                    grid: { color: 'rgba(255, 255, 255, 0.1)' }
                },
                y: {
                     ticks: {
                        color: '#E2E8F0',
                        font: { size: 14, family: "'Noto Sans TC', sans-serif" }
                    },
                    grid: { display: false }
                }
            }
        };

        const priceData = [
            { country: '越南', price: 59053 },
            { country: '日本', price: 61276 },
            { country: '澳洲', price: 64480 },
            { country: '美國 (奧勒岡)', price: 64968 },
            { country: '香港', price: 66876 },
            { country: '台灣 (標準)', price: 67900 }
        ].sort((a, b) => a.price - b.price);

        const netProductPriceCtx = document.getElementById('netProductPriceChart').getContext('2d');
        new Chart(netProductPriceCtx, {
            type: 'bar',
            data: {
                labels: priceData.map(d => wrapLabel(d.country)),
                datasets: [{
                    label: '最終產品價格 (TWD)',
                    data: priceData.map(d => d.price),
                    backgroundColor: '#4299E1',
                    borderColor: '#2B6CB0',
                    borderWidth: 1,
                    borderRadius: 4
                }]
            },
            options: commonChartOptions
        });
        
        const totalCostData = [
             { country: '越南', product: 59053, travel: 4800 },
             { country: '日本', product: 61276, travel: 8000 },
             { country: '香港', product: 66876, travel: 4800 },
             { country: '澳洲', product: 64480, travel: 19300 },
             { country: '美國 (奧勒岡)', product: 64968, travel: 25800 }
        ].map(d => ({ ...d, total: d.product + d.travel })).sort((a,b) => a.total - b.total);

        const totalCostCtx = document.getElementById('totalCostChart').getContext('2d');
        new Chart(totalCostCtx, {
            type: 'bar',
            data: {
                labels: totalCostData.map(d => wrapLabel(d.country)),
                datasets: [
                    {
                        label: '產品價格',
                        data: totalCostData.map(d => d.product),
                        backgroundColor: '#4299E1',
                        borderRadius: 4
                    },
                    {
                        label: '旅行成本',
                        data: totalCostData.map(d => d.travel),
                        backgroundColor: '#FBBF24',
                        borderRadius: 4
                    }
                ]
            },
            options: {
                ...commonChartOptions,
                plugins: {
                    ...commonChartOptions.plugins,
                    legend: {
                        display: true,
                        position: 'top',
                        labels: { color: '#E2E8F0' }
                    }
                },
                scales: {
                    ...commonChartOptions.scales,
                    x: { ...commonChartOptions.scales.x, stacked: true },
                    y: { ...commonChartOptions.scales.y, stacked: true }
                }
            }
        });

        const savingsData = [
            { country: '越南', saving: 4047 },
            { country: '日本', saving: -1376 },
            { country: '香港', saving: -3776 },
            { country: '澳洲', saving: -15880 },
            { country: '美國 (奧勒岡)', saving: -22868 },
        ].sort((a,b) => b.saving - a.saving);

        const netSavingsCtx = document.getElementById('netSavingsChart').getContext('2d');
        new Chart(netSavingsCtx, {
            type: 'bar',
            data: {
                labels: savingsData.map(d => wrapLabel(d.country)),
                datasets: [{
                    label: '淨節省金額 (TWD)',
                    data: savingsData.map(d => d.saving),
                    backgroundColor: savingsData.map(d => d.saving > 0 ? '#48BB78' : '#F56565'),
                    borderRadius: 4
                }]
            },
            options: commonChartOptions
        });

    </script>
</body>
</html>
